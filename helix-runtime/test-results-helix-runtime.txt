npm warn Unknown project config "allow-build-scripts". This will stop working in the next major version of npm.

> openclaw@2026.2.3 test
> node scripts/test-parallel.mjs

(node:5292) [DEP0190] DeprecationWarning: Passing args to a child process with shell option true can lead to security vulnerabilities, as the arguments are not escaped, only concatenated.
(Use `node --trace-deprecation ...` to show where the warning was created)
npm warn Unknown env config "allow-build-scripts". This will stop working in the next major version of npm.
npm warn Unknown project config "allow-build-scripts". This will stop working in the next major version of npm.
npm warn Unknown env config "allow-build-scripts". This will stop working in the next major version of npm.
npm warn Unknown project config "allow-build-scripts". This will stop working in the next major version of npm.


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/Specter/Desktop/Helix/helix-runtime[39m
[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/Specter/Desktop/Helix/helix-runtime[39m


 [31m‚ùØ[39m extensions/nostr/src/nostr-profile.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/nostr/src/nostr-profile.fuzz.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/nostr/src/nostr-profile-import.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/nostr/src/nostr-bus.fuzz.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/nostr/src/nostr-bus.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/memory-lancedb/index.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m4 failed[39m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 70[2mms[22m[39m
[31m     [31m√ó[31m memory plugin registers and initializes correctly[39m[32m 64[2mms[22m[39m
[31m     [31m√ó[31m config schema parses valid config[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m config schema resolves env vars[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m config schema rejects missing apiKey[39m[32m 1[2mms[22m[39m
     [32m‚úì[39m shouldCapture filters correctly[32m 1[2mms[22m[39m
     [32m‚úì[39m detectCategory classifies correctly[32m 1[2mms[22m[39m
     [2m[90m‚Üì[39m[22m memory tools work end-to-end
 [31m‚ùØ[39m extensions/nostr/src/types.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/matrix/src/matrix/client.test.ts [2m([22m[2m0 test[22m[2m)[22m
(node:41696) [DEP0190] DeprecationWarning: Passing args to a child process with shell option true can lead to security vulnerabilities, as the arguments are not escaped, only concatenated.
(Use `node --trace-deprecation ...` to show where the warning was created)
DeprecationWarning: Passing args to a child process with shell option true can lead to security vulnerabilities, as the arguments are not escaped, only concatenated.
    at normalizeSpawnArguments (node:child_process:644:15)
    at spawn (node:child_process:789:13)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/lobster/src/lobster-tool.ts:61:19
    at new Promise (<anonymous>)
    at runLobsterSubprocessOnce (C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/lobster/src/lobster-tool.ts:60:16)
    at runLobsterSubprocess (C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/lobster/src/lobster-tool.ts:129:20)
    at Object.execute (C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/lobster/src/lobster-tool.ts:236:26)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/lobster/src/lobster-tool.test.ts:76:17
    at file:///C:/Users/Specter/Desktop/Helix/helix-runtime/node_modules/@vitest/runner/dist/index.js:915:20
 [32m‚úì[39m extensions/lobster/src/lobster-tool.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 450[2mms[22m[39m
 [32m‚úì[39m extensions/llm-task/src/llm-task-tool.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [32m‚úì[39m extensions/matrix/src/matrix/send.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 167[2mms[22m[39m
 [32m‚úì[39m extensions/msteams/src/attachments.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32m‚úì[39m extensions/twitch/src/probe.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 216[2mms[22m[39m
 [32m‚úì[39m extensions/google-gemini-cli-auth/oauth.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m extensions/msteams/src/polls-store.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m‚úì[39m extensions/msteams/src/polls.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [31m‚ùØ[39m extensions/twitch/src/onboarding.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m15 failed[39m[2m)[22m[33m 3769[2mms[22m[39m
[31m       [31m√ó[31m should return existing token when user confirms to keep it[39m[33m 3764[2mms[22m[39m
[31m       [31m√ó[31m should prompt for new token when user doesn't keep existing[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should use env token as initial value when provided[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should validate token format[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return early when no existing token and no env token[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should prompt for username with validation[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should use existing username as initial value[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should prompt for client ID with validation[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return channel name when provided[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should require a non-empty channel name[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return empty object when user declines[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should prompt for credentials when user accepts[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should use existing values as initial prompts[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should return null when user declines env token[39m[32m 0[2mms[22m[39m
[31m       [31m√ó[31m should prompt for username and clientId when using env token[39m[32m 0[2mms[22m[39m
 [31m‚ùØ[39m extensions/nostr/src/channel.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/bluebubbles/src/monitor.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/twitch/src/plugin.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/matrix/src/channel.directory.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/matrix/src/matrix/accounts.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m extensions/msteams/src/conversation-store-fs.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 39[2mms[22m[39m
 [32m‚úì[39m src/agents/bash-tools.process.send-keys.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 5040[2mms[22m[39m
   [33m[2m‚úì[22m[39m process send-keys encodes Enter for pty sessions [33m 2647[2mms[22m[39m
   [33m[2m‚úì[22m[39m process submit sends Enter for pty sessions [33m 2391[2mms[22m[39m
 [32m‚úì[39m extensions/tlon/src/urbit/send.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m extensions/nostr/src/nostr-state-store.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32m‚úì[39m extensions/voice-call/src/media-stream.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32m‚úì[39m extensions/zalo/src/monitor.webhook.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 32[2mms[22m[39m
[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mupgrades providerCallId mapping when provider ID changes
[22m[39m[voice-call] Starting max duration timer (300s) for call 944d9de0-48fa-499c-8ef1-4ae718bec53f

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Using inline TwiML for notify mode (voice: Polly.Joanna)

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Starting max duration timer (300s) for call a52bee77-a946-4a34-bcfa-62308f041c9e
[voice-call] Speaking initial message for call a52bee77-a946-4a34-bcfa-62308f041c9e (mode: notify)

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Notify mode: auto-hangup in 3s for call a52bee77-a946-4a34-bcfa-62308f041c9e

 [32m‚úì[39m extensions/bluebubbles/src/send.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32m‚úì[39m extensions/voice-call/src/manager.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m extensions/twitch/src/twitch-client.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 17[2mms[22m[39m
[90mstderr[2m | extensions/voice-call/src/webhook-security.test.ts[2m > [22m[2mverifyTwilioWebhook[2m > [22m[2mallows invalid signatures for ngrok free tier only on loopback
[22m[39m[voice-call] Twilio signature validation failed (ngrok free tier compatibility, loopback only)

 [32m‚úì[39m extensions/voice-call/src/webhook-security.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m extensions/bluebubbles/src/chat.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32m‚úì[39m extensions/nostr/src/nostr-bus.integration.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32m‚úì[39m extensions/bluebubbles/src/reactions.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [31m‚ùØ[39m extensions/bluebubbles/src/actions.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m extensions/bluebubbles/src/attachments.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [31m‚ùØ[39m src/telegram/bot.create-telegram-bot.routes-dms-by-telegram-accountid-binding.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 8337[2mms[22m[39m
[31m     [31m√ó[31m routes DMs by telegram accountId binding[39m[33m 6515[2mms[22m[39m
[31m     [31m√ó[31m allows per-group requireMention override[39m[33m 479[2mms[22m[39m
[31m     [31m√ó[31m allows per-topic requireMention override[39m[33m 317[2mms[22m[39m
[31m     [31m√ó[31m honors groups default when no explicit group override exists[39m[33m 305[2mms[22m[39m
[31m     [31m√ó[31m does not block group messages when bot username is unknown[39m[33m 346[2mms[22m[39m
[31m     [31m√ó[31m sends GIF replies as animations[39m[33m 372[2mms[22m[39m
 [31m‚ùØ[39m src/telegram/bot.create-telegram-bot.blocks-all-group-messages-grouppolicy-is.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[33m 8467[2mms[22m[39m
[31m     [31m√ó[31m blocks all group messages when groupPolicy is 'disabled'[39m[33m 6518[2mms[22m[39m
[31m     [31m√ó[31m blocks group messages from senders not in allowFrom when groupPolicy is 'allowlist'[39m[32m 289[2mms[22m[39m
[31m     [31m√ó[31m allows group messages from senders in allowFrom (by ID) when groupPolicy is 'allowlist'[39m[33m 401[2mms[22m[39m
[31m     [31m√ó[31m allows group messages from senders in allowFrom (by username) when groupPolicy is 'allowlist'[39m[33m 376[2mms[22m[39m
[31m     [31m√ó[31m allows group messages from telegram:-prefixed allowFrom entries when groupPolicy is 'allowlist'[39m[32m 299[2mms[22m[39m
[31m     [31m√ó[31m allows group messages from tg:-prefixed allowFrom entries case-insensitively when groupPolicy is 'allowlist'[39m[32m 287[2mms[22m[39m
[31m     [31m√ó[31m allows all group messages when groupPolicy is 'open'[39m[32m 297[2mms[22m[39m
 [31m‚ùØ[39m src/telegram/bot.create-telegram-bot.matches-usernames-case-insensitively-grouppolicy-is.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[33m 8571[2mms[22m[39m
[31m     [31m√ó[31m matches usernames case-insensitively when groupPolicy is 'allowlist'[39m[33m 6518[2mms[22m[39m
[31m     [31m√ó[31m allows direct messages regardless of groupPolicy[39m[32m 288[2mms[22m[39m
[31m     [31m√ó[31m allows direct messages with tg/Telegram-prefixed allowFrom entries[39m[33m 309[2mms[22m[39m
[31m     [31m√ó[31m allows direct messages with telegram:-prefixed allowFrom entries[39m[33m 386[2mms[22m[39m
[31m     [31m√ó[31m allows group messages with wildcard in allowFrom when groupPolicy is 'allowlist'[39m[33m 413[2mms[22m[39m
[31m     [31m√ó[31m blocks group messages with no sender ID when groupPolicy is 'allowlist'[39m[33m 324[2mms[22m[39m
[31m     [31m√ó[31m matches telegram:-prefixed allowFrom entries in group allowlist[39m[33m 332[2mms[22m[39m
 [31m‚ùØ[39m src/telegram/bot.create-telegram-bot.sends-replies-without-native-reply-threading.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[33m 8719[2mms[22m[39m
[31m     [31m√ó[31m sends replies without native reply threading[39m[33m 6507[2mms[22m[39m
[31m     [31m√ó[31m honors replyToMode=first for threaded replies[39m[33m 506[2mms[22m[39m
[31m     [31m√ó[31m prefixes final replies with responsePrefix[39m[33m 365[2mms[22m[39m
[31m     [31m√ó[31m honors replyToMode=all for threaded replies[39m[33m 353[2mms[22m[39m
[31m     [31m√ó[31m blocks group messages when telegram.groups is set without a wildcard[39m[33m 375[2mms[22m[39m
[31m     [31m√ó[31m skips group messages without mention when requireMention is enabled[39m[33m 350[2mms[22m[39m
[31m     [31m√ó[31m honors routed group activation from session store[39m[32m 262[2mms[22m[39m
 [31m‚ùØ[39m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[33m 8771[2mms[22m[39m
[31m     [31m√ó[31m accepts group messages when mentionPatterns match (without @botUsername)[39m[33m 6503[2mms[22m[39m
[31m     [31m√ó[31m accepts group messages when mentionPatterns match even if another user is mentioned[39m[33m 331[2mms[22m[39m
[31m     [31m√ó[31m keeps group envelope headers stable (sender identity is separate)[39m[32m 281[2mms[22m[39m
[31m     [31m√ó[31m reacts to mention-gated group messages when ackReaction is enabled[39m[33m 318[2mms[22m[39m
[31m     [31m√ó[31m clears native commands when disabled[39m[33m 329[2mms[22m[39m
[31m     [31m√ó[31m skips group messages when requireMention is enabled and no mention matches[39m[33m 402[2mms[22m[39m
[31m     [31m√ó[31m allows group messages when requireMention is enabled but mentions cannot be detected[39m[33m 320[2mms[22m[39m
[31m     [31m√ó[31m includes reply-to context when a Telegram reply is received[39m[32m 283[2mms[22m[39m
 [32m‚úì[39m extensions/twitch/src/outbound.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m extensions/bluebubbles/src/targets.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m extensions/matrix/src/matrix/format.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m extensions/matrix/src/matrix/send/targets.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m extensions/twitch/src/access-control.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [31m‚ùØ[39m extensions/nostr/src/nostr-profile-http.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/msteams/src/media-helpers.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/line/src/channel.sendPayload.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m extensions/msteams/src/file-consent-helpers.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m extensions/twitch/src/send.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m extensions/voice-call/src/config.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [31m‚ùØ[39m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[33m 5210[2mms[22m[39m
[31m     [31m√ó[31m installs grammY throttler[39m[33m 2527[2mms[22m[39m
[31m     [31m√ó[31m uses wrapped fetch when global fetch is available[39m[32m 277[2mms[22m[39m
[31m     [31m√ó[31m passes timeoutSeconds even without a custom fetch[39m[33m 316[2mms[22m[39m
[31m     [31m√ó[31m prefers per-account timeoutSeconds overrides[39m[32m 297[2mms[22m[39m
[31m     [31m√ó[31m sequentializes updates by chat and thread[39m[32m 277[2mms[22m[39m
[31m     [31m√ó[31m routes callback_query payloads as messages and answers callbacks[39m[32m 293[2mms[22m[39m
[31m     [31m√ó[31m wraps inbound message with Telegram envelope[39m[32m 274[2mms[22m[39m
[31m     [31m√ó[31m requests pairing by default for unknown DM senders[39m[32m 253[2mms[22m[39m
[31m     [31m√ó[31m does not resend pairing code when a request is already pending[39m[32m 272[2mms[22m[39m
[31m     [31m√ó[31m triggers typing cue via onReplyStart[39m[33m 383[2mms[22m[39m
 [31m‚ùØ[39m extensions/msteams/src/messenger.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[33m 2117[2mms[22m[39m
[31m     [31m√ó[31m downloads media via file_path (no file.download)[39m[33m 2102[2mms[22m[39m
[31m     [31m√ó[31m prefers proxyFetch over global fetch[39m[32m 6[2mms[22m[39m
[31m     [31m√ó[31m logs a handler error when getFile returns no file_path[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m buffers messages with same media_group_id and processes them together[39m[32m 2[2mms[22m[39m
[31m     [31m√ó[31m processes separate media groups independently[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m downloads static sticker (WEBP) and includes sticker metadata[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m refreshes cached sticker metadata on cache hit[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m skips animated stickers (TGS format)[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m skips video stickers (WEBM format)[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m buffers near-limit text and processes sequential parts as one message[39m[32m 1[2mms[22m[39m
 [31m‚ùØ[39m extensions/msteams/src/policy.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m extensions/twitch/src/token.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m extensions/googlechat/src/api.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [31m‚ùØ[39m src/telegram/bot.media.includes-location-text-ctx-fields-pins.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 2188[2mms[22m[39m
[31m     [31m√ó[31m includes location text and ctx fields for pins[39m[33m 2184[2mms[22m[39m
[31m     [31m√ó[31m captures venue fields for named places[39m[32m 2[2mms[22m[39m
 [31m‚ùØ[39m src/telegram/bot.create-telegram-bot.dedupes-duplicate-callback-query-updates-by-update.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 2558[2mms[22m[39m
[31m     [31m√ó[31m dedupes duplicate callback_query updates by update_id[39m[33m 2229[2mms[22m[39m
[31m     [31m√ó[31m allows distinct callback_query ids without update_id[39m[33m 328[2mms[22m[39m
 [31m‚ùØ[39m src/telegram/bot.create-telegram-bot.applies-topic-skill-filters-system-prompts.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 3586[2mms[22m[39m
[31m     [31m√ó[31m applies topic skill filters and system prompts[39m[33m 2379[2mms[22m[39m
[31m     [31m√ó[31m passes message_thread_id to topic replies[39m[32m 254[2mms[22m[39m
[31m     [31m√ó[31m threads native command replies inside topics[39m[33m 435[2mms[22m[39m
[31m     [31m√ó[31m skips tool summaries for native slash commands[39m[32m 245[2mms[22m[39m
[31m     [31m√ó[31m dedupes duplicate message updates by update_id[39m[32m 271[2mms[22m[39m
 [32m‚úì[39m extensions/matrix/src/matrix/monitor/media.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m extensions/twitch/src/status.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [31m‚ùØ[39m src/telegram/bot.create-telegram-bot.matches-tg-prefixed-allowfrom-entries-case-insensitively.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 3928[2mms[22m[39m
[31m     [31m√ó[31m matches tg:-prefixed allowFrom entries case-insensitively in group allowlist[39m[33m 2538[2mms[22m[39m
[31m     [31m√ó[31m blocks group messages when groupPolicy allowlist has no groupAllowFrom[39m[32m 257[2mms[22m[39m
[31m     [31m√ó[31m allows control commands with TG-prefixed groupAllowFrom entries[39m[33m 315[2mms[22m[39m
[31m     [31m√ó[31m isolates forum topic sessions and carries thread metadata[39m[32m 256[2mms[22m[39m
[31m     [31m√ó[31m falls back to General topic thread id for typing in forums[39m[33m 318[2mms[22m[39m
[31m     [31m√ó[31m routes General topic replies using thread id 1[39m[32m 242[2mms[22m[39m
 [32m‚úì[39m extensions/msteams/src/probe.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m extensions/matrix/src/matrix/monitor/allowlist.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [31m‚ùØ[39m extensions/diagnostics-otel/src/service.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m extensions/msteams/src/errors.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m extensions/tlon/src/urbit/sse-client.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [31m‚ùØ[39m extensions/line/src/channel.logout.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m extensions/msteams/src/inbound.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m extensions/zalouser/src/status-issues.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [31m‚ùØ[39m extensions/tlon/src/config-schema.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/mattermost/src/channel.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m extensions/twitch/src/config.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [31m‚ùØ[39m extensions/msteams/src/channel.directory.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/onboard-non-interactive.ai-gateway.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 2228[2mms[22m[39m
[31m     [31m√ó[31m stores the API key and configures the default model[39m[33m 2227[2mms[22m[39m
 [32m‚úì[39m extensions/voice-call/src/providers/plivo.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m extensions/googlechat/src/targets.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m extensions/voice-call/src/providers/twilio.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [31m‚ùØ[39m src/cli/gateway-cli.coverage.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[33m 2884[2mms[22m[39m
[31m     [31m√ó[31m registers call/health commands and routes to callGateway[39m[33m 2573[2mms[22m[39m
[31m     [31m√ó[31m registers gateway probe and routes to gatewayStatusCommand[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m registers gateway discover and prints JSON[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m registers gateway discover and prints human output with details on new lines[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m validates gateway discover timeout[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m fails gateway call on invalid params JSON[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m validates gateway ports and handles force/start errors[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m prints stop hints on GatewayLockError when service is loaded[39m[32m 21[2mms[22m[39m
[31m     [31m√ó[31m uses env/config port when --port is omitted[39m[32m 287[2mms[22m[39m
 [31m‚ùØ[39m src/commands/onboard-non-interactive.gateway.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 2002[2mms[22m[39m
[31m     [31m√ó[31m writes gateway token auth into config and gateway enforces it[39m[33m 1981[2mms[22m[39m
[31m     [31m√ó[31m writes gateway.remote url/token and callGateway uses them[39m[32m 7[2mms[22m[39m
     [32m‚úì[39m auto-generates token auth when binding LAN and persists the token[32m 0[2mms[22m[39m
 [32m‚úì[39m extensions/msteams/src/sent-message-cache.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [31m‚ùØ[39m src/agents/bash-tools.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 16953[2mms[22m[39m
     [33m[2m‚úì[22m[39m backgrounds after yield and can be polled [33m 2383[2mms[22m[39m
     [32m‚úì[39m supports explicit background[32m 9[2mms[22m[39m
     [32m‚úì[39m derives a session name from the command[32m 45[2mms[22m[39m
     [33m[2m‚úì[22m[39m uses default timeout when timeout is omitted [33m 1165[2mms[22m[39m
     [32m‚úì[39m rejects elevated requests when not allowed[32m 1[2mms[22m[39m
[31m     [31m√ó[31m does not default to elevated when not allowed[39m[33m 1025[2mms[22m[39m
     [33m[2m‚úì[22m[39m logs line-based slices and defaults to last lines [33m 2822[2mms[22m[39m
     [33m[2m‚úì[22m[39m supports line offsets for log slices [33m 3195[2mms[22m[39m
     [32m‚úì[39m scopes process sessions by scopeKey[32m 25[2mms[22m[39m
     [33m[2m‚úì[22m[39m enqueues a system event when a backgrounded exec exits [33m 3411[2mms[22m[39m
     [33m[2m‚úì[22m[39m prepends configured path entries [33m 2867[2mms[22m[39m
     [32m‚úì[39m prepends custom PATH after login shell sourcing to preserve both custom and system tools[32m 1[2mms[22m[39m
     [32m‚úì[39m does not interpolate PATH into the shell command[32m 0[2mms[22m[39m
     [32m‚úì[39m does not add PATH export when PATH is not in env[32m 0[2mms[22m[39m
     [32m‚úì[39m includes workdir flag when specified[32m 0[2mms[22m[39m
     [32m‚úì[39m uses login shell for consistent environment[32m 0[2mms[22m[39m
     [32m‚úì[39m includes tty flag when requested[32m 0[2mms[22m[39m
 [32m‚úì[39m extensions/tlon/src/monitor/processed-messages.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [31m‚ùØ[39m src/cli/models-cli.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 4058[2mms[22m[39m
[31m     [31m√ó[31m registers github-copilot login command[39m[33m 4056[2mms[22m[39m
[31m     [31m√ó[31m passes --agent to models status[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m passes parent --agent to models status[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m shows help for models auth without error exit[39m[32m 0[2mms[22m[39m
 [31m‚ùØ[39m src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts [2m([22m[2m8 tests[22m[2m | [22m[33m8 skipped[39m[2m)[22m[33m 3603[2mms[22m[39m
     [2m[90m‚Üì[39m[22m rotates for auto-pinned profiles
     [2m[90m‚Üì[39m[22m does not rotate for user-pinned profiles
     [2m[90m‚Üì[39m[22m honors user-pinned profiles even when in cooldown
     [2m[90m‚Üì[39m[22m ignores user-locked profile when provider mismatches
     [2m[90m‚Üì[39m[22m skips profiles in cooldown during initial selection
     [2m[90m‚Üì[39m[22m fails over when all profiles are in cooldown and fallbacks are configured
     [2m[90m‚Üì[39m[22m fails over when auth is unavailable and fallbacks are configured
     [2m[90m‚Üì[39m[22m skips profiles in cooldown when rotating after failure
 [32m‚úì[39m extensions/matrix/src/matrix/poll-types.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [31m‚ùØ[39m src/signal/monitor.event-handler.typing-read-receipts.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 3136[2mms[22m[39m
[31m     [31m√ó[31m sends typing + read receipt for allowed DMs[39m[33m 3134[2mms[22m[39m
[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: C:\WINDOWS\TEMP\openclaw-session-memory-Znio3f\sessions\test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] sessionContent length: [33m91[39m
[session-memory] Calling generateSlugViaLLM...

 [31m‚ùØ[39m extensions/zalo/src/channel.directory.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m extensions/googlechat/src/monitor.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - Discord[2m > [22m[2mblocks DISCORD_WEBHOOK_COMMANDS
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: DISCORD_WEBHOOK_COMMANDS

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - Discord[2m > [22m[2mblocks DISCORD_WEBHOOK_COMMANDS
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:67:18
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - Discord[2m > [22m[2mblocks all DISCORD_WEBHOOK_* patterns
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: DISCORD_WEBHOOK_API
[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: DISCORD_WEBHOOK_ALERTS
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:75:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:76:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks STRIPE_SECRET_KEY
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: STRIPE_SECRET_KEY

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks STRIPE_SECRET_KEY
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:85:18
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks all STRIPE_* patterns
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: STRIPE_PUBLISHABLE_KEY

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks all STRIPE_* patterns
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:92:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks all SUPABASE_* patterns
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: SUPABASE_URL
[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: SUPABASE_SERVICE_ROLE_KEY
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:102:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:103:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks variables ending with API_KEY
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: CUSTOM_API_KEY

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks variables ending with API_KEY
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:110:18
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks DEEPSEEK_* patterns
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: DEEPSEEK_API_KEY

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks DEEPSEEK_* patterns
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:117:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks GEMINI_* patterns
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: GEMINI_API_KEY

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks GEMINI_* patterns
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:126:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks variables starting with SECRET
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: SECRET_TOKEN

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks variables starting with SECRET
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:135:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks variables starting with TOKEN
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: TOKEN_VALUE

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks variables starting with TOKEN
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:144:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks variables starting with PASSWORD
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: PASSWORD_DB

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - API Keys[2m > [22m[2mblocks variables starting with PASSWORD
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:153:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - AWS & GitHub[2m > [22m[2mblocks AWS_* patterns
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: AWS_ACCESS_KEY_ID
[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: AWS_SECRET_ACCESS_KEY
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:165:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:166:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - AWS & GitHub[2m > [22m[2mblocks GITHUB_* patterns
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: GITHUB_TOKEN

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mBlocked Variables - AWS & GitHub[2m > [22m[2mblocks GITHUB_* patterns
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:176:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mMultiple Plugin Instances[2m > [22m[2mcreates independent proxies for different plugins
[22m[39m[Plugin Security] Plugin "plugin-1" attempted to access restricted environment variable: DISCORD_WEBHOOK_COMMANDS
[Plugin Security] Plugin "plugin-2" attempted to access restricted environment variable: DISCORD_WEBHOOK_COMMANDS
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:215:19
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:216:19
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mverifySensitiveVariableBlocked() Function[2m > [22m[2mverifies that sensitive var is blocked
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: DISCORD_WEBHOOK_COMMANDS
[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: STRIPE_SECRET_KEY
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at verifySensitiveVariableBlocked (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:197:10)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:290:14
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at verifySensitiveVariableBlocked (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:197:10)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:291:14
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mSecurity Edge Cases[2m > [22m[2mblocks attempts to access credentials through aliases
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: AUTH_TOKEN

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mSecurity Edge Cases[2m > [22m[2mblocks attempts to access credentials through aliases
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:310:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mSecurity Edge Cases[2m > [22m[2mblocks variables with PRIVATE_KEY pattern
[22m[39m[Plugin Security] Plugin "test-plugin" attempted to access restricted environment variable: GITHUB_PRIVATE_KEY

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mSecurity Edge Cases[2m > [22m[2mblocks variables with PRIVATE_KEY pattern
[22m[39m[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:319:23
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mIntegration with Plugin API[2m > [22m[2mprovides safe environment for plugins
[22m[39m[Plugin Security] Plugin "my-plugin" attempted to access restricted environment variable: DISCORD_WEBHOOK_COMMANDS
[Plugin Security] Plugin "my-plugin" attempted to access restricted environment variable: STRIPE_SECRET_KEY
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:352:18
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:353:18
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

[90mstderr[2m | src/plugins/environment-proxy.test.ts[2m > [22m[2mPlugin Environment Proxy[2m > [22m[2mIntegration with Plugin API[2m > [22m[2mprevents accidental credential leakage
[22m[39m[Plugin Security] Plugin "untrusted-plugin" attempted to access restricted environment variable: DANGEROUS_API_KEY
[Plugin Security] Plugin "untrusted-plugin" attempted to access restricted environment variable: DANGEROUS_API_KEY
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.get (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:361:18
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
[Plugin Security] Failed to log access attempt: Error: Not implemented in type stub
    at logSecretOperation (C:/Users/Specter/Desktop/Helix/helix-runtime/src/helix/hash-chain.ts:13:9)
    at logPluginSecretAccess (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:154:3)
    at Object.env (C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.ts:81:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/plugins/environment-proxy.test.ts:364:15
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Specter/Desktop/Helix/helix-runtime/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37

 [31m‚ùØ[39m src/plugins/environment-proxy.test.ts [2m([22m[2m43 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 31[2mms[22m[39m
       [32m‚úì[39m allows access to NODE_ENV[32m 2[2mms[22m[39m
       [32m‚úì[39m allows access to PATH[32m 1[2mms[22m[39m
       [32m‚úì[39m allows access to USER[32m 0[2mms[22m[39m
       [32m‚úì[39m allows access to HOME[32m 0[2mms[22m[39m
       [32m‚úì[39m allows access to LANG and other locale vars[32m 0[2mms[22m[39m
       [32m‚úì[39m allows access to TZ (timezone)[32m 0[2mms[22m[39m
       [32m‚úì[39m blocks DISCORD_WEBHOOK_COMMANDS[32m 4[2mms[22m[39m
       [32m‚úì[39m blocks all DISCORD_WEBHOOK_* patterns[32m 1[2mms[22m[39m
       [32m‚úì[39m blocks STRIPE_SECRET_KEY[32m 1[2mms[22m[39m
       [32m‚úì[39m blocks all STRIPE_* patterns[32m 1[2mms[22m[39m
       [32m‚úì[39m blocks all SUPABASE_* patterns[32m 1[2mms[22m[39m
       [32m‚úì[39m blocks variables ending with API_KEY[32m 1[2mms[22m[39m
       [32m‚úì[39m blocks DEEPSEEK_* patterns[32m 1[2mms[22m[39m
       [32m‚úì[39m blocks GEMINI_* patterns[32m 0[2mms[22m[39m
       [32m‚úì[39m blocks variables starting with SECRET[32m 0[2mms[22m[39m
       [32m‚úì[39m blocks variables starting with TOKEN[32m 0[2mms[22m[39m
       [32m‚úì[39m blocks variables starting with PASSWORD[32m 0[2mms[22m[39m
       [32m‚úì[39m blocks AWS_* patterns[32m 1[2mms[22m[39m
       [32m‚úì[39m blocks GITHUB_* patterns[32m 1[2mms[22m[39m
       [32m‚úì[39m returns undefined for non-existent variables[32m 0[2mms[22m[39m
[31m       [31m√ó[31m is read-only (blocking sets)[39m[32m 1[2mms[22m[39m
       [32m‚úì[39m correctly implements has() for allowed vars[32m 0[2mms[22m[39m
       [32m‚úì[39m correctly implements has() for blocked vars[32m 0[2mms[22m[39m
       [32m‚úì[39m correctly implements has() for non-existent vars[32m 0[2mms[22m[39m
       [32m‚úì[39m creates independent proxies for different plugins[32m 1[2mms[22m[39m
       [32m‚úì[39m identifies Discord webhook vars as sensitive[32m 0[2mms[22m[39m
       [32m‚úì[39m identifies Stripe vars as sensitive[32m 0[2mms[22m[39m
       [32m‚úì[39m identifies API keys as sensitive[32m 0[2mms[22m[39m
       [32m‚úì[39m identifies AWS vars as sensitive[32m 0[2mms[22m[39m
       [32m‚úì[39m identifies allowed vars as NOT sensitive[32m 0[2mms[22m[39m
       [32m‚úì[39m handles case-insensitive patterns[32m 0[2mms[22m[39m
       [32m‚úì[39m returns list of allowed variables[32m 1[2mms[22m[39m
       [32m‚úì[39m does not include sensitive variables[32m 0[2mms[22m[39m
       [32m‚úì[39m returns a sorted list[32m 1[2mms[22m[39m
       [32m‚úì[39m verifies that sensitive var is blocked[32m 1[2mms[22m[39m
       [32m‚úì[39m returns false for allowed variables[32m 0[2mms[22m[39m
       [32m‚úì[39m returns false for non-sensitive, unset variables[32m 0[2mms[22m[39m
       [32m‚úì[39m blocks attempts to access credentials through aliases[32m 1[2mms[22m[39m
       [32m‚úì[39m blocks variables with PRIVATE_KEY pattern[32m 1[2mms[22m[39m
       [32m‚úì[39m handles empty and null values correctly[32m 0[2mms[22m[39m
[31m       [31m√ó[31m blocks credential-like values even if not in allowlist[39m[32m 2[2mms[22m[39m
       [32m‚úì[39m provides safe environment for plugins[32m 1[2mms[22m[39m
       [32m‚úì[39m prevents accidental credential leakage[32m 1[2mms[22m[39m
 [31m‚ùØ[39m extensions/zalouser/src/channel.test.ts [2m([22m[2m0 test[22m[2m)[22m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Suites 26 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m extensions/bluebubbles/src/actions.test.ts[2m [ extensions/bluebubbles/src/actions.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/bluebubbles/src/monitor.test.ts[2m [ extensions/bluebubbles/src/monitor.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/googlechat/src/monitor.test.ts[2m [ extensions/googlechat/src/monitor.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/line/src/channel.logout.test.ts[2m [ extensions/line/src/channel.logout.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/line/src/channel.sendPayload.test.ts[2m [ extensions/line/src/channel.sendPayload.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/mattermost/src/channel.test.ts[2m [ extensions/mattermost/src/channel.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/matrix/src/channel.directory.test.ts[2m [ extensions/matrix/src/channel.directory.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/msteams/src/channel.directory.test.ts[2m [ extensions/msteams/src/channel.directory.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/msteams/src/media-helpers.test.ts[2m [ extensions/msteams/src/media-helpers.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/msteams/src/messenger.test.ts[2m [ extensions/msteams/src/messenger.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/msteams/src/policy.test.ts[2m [ extensions/msteams/src/policy.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/nostr/src/channel.test.ts[2m [ extensions/nostr/src/channel.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/nostr/src/nostr-profile-http.test.ts[2m [ extensions/nostr/src/nostr-profile-http.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/tlon/src/config-schema.test.ts[2m [ extensions/tlon/src/config-schema.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/twitch/src/plugin.test.ts[2m [ extensions/twitch/src/plugin.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/zalo/src/channel.directory.test.ts[2m [ extensions/zalo/src/channel.directory.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/zalouser/src/channel.test.ts[2m [ extensions/zalouser/src/channel.test.ts ][22m
[41m[1m FAIL [22m[49m extensions/matrix/src/matrix/accounts.test.ts[2m [ extensions/matrix/src/matrix/accounts.test.ts ][22m
[31m[1mError[22m: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'[39m
[36m [2m‚ùØ[22m src/telegram/bot-handlers.ts:[2m31:1[22m[39m
    [90m 29| [39m[35mimport[39m { migrateTelegramGroupConfig } [35mfrom[39m [32m"./group-migration.js"[39m[33m;[39m
    [90m 30| [39mimport { resolveTelegramInlineButtonsScope } from "./inline-buttons.js‚Ä¶
    [90m 31| [39m[35mimport[39m {
    [90m   | [39m[31m^[39m
    [90m 32| [39m  buildModelsKeyboard[33m,[39m
    [90m 33| [39m  buildProviderKeyboard[33m,[39m
[90m [2m‚ùØ[22m src/telegram/bot.ts:[2m32:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/45]‚éØ[22m[39m

[41m[1m FAIL [22m[49m extensions/diagnostics-otel/src/service.test.ts[2m [ extensions/diagnostics-otel/src/service.test.ts ][22m
[31m[1mError[22m: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock[39m
[36m [2m‚ùØ[22m extensions/diagnostics-otel/src/service.ts:[2m14:1[22m[39m
    [90m 12| [39m
    [90m 13| [39mimport type { DiagnosticEventPayload, OpenClawPluginService } from "op‚Ä¶
    [90m 14| [39mimport { onDiagnosticEvent, registerLogTransport } from "openclaw/plug‚Ä¶
    [90m   | [39m[31m^[39m
    [90m 15| [39m
    [90m 16| [39m[35mconst[39m [33mDEFAULT_SERVICE_NAME[39m [33m=[39m [32m"openclaw"[39m[33m;[39m
[90m [2m‚ùØ[22m extensions/diagnostics-otel/src/service.test.ts:[2m106:1[22m[39m

[31m[1mCaused by: Error[22m: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'[39m
[36m [2m‚ùØ[22m src/telegram/bot-handlers.ts:[2m31:1[22m[39m
[90m [2m‚ùØ[22m src/telegram/bot.ts:[2m32:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ code: 'ERR_MODULE_NOT_FOUND' }[39m
[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/45]‚éØ[22m[39m

[41m[1m FAIL [22m[49m extensions/nostr/src/nostr-bus.fuzz.test.ts[2m [ extensions/nostr/src/nostr-bus.fuzz.test.ts ][22m
[31m[1mError[22m: Cannot find package 'nostr-tools' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/nostr/src/nostr-bus.ts'[39m
[36m [2m‚ùØ[22m extensions/nostr/src/nostr-bus.ts:[2m1:1[22m[39m
    [90m  1| [39m[35mimport[39m {
    [90m   | [39m[31m^[39m
    [90m  2| [39m  [33mSimplePool[39m[33m,[39m
    [90m  3| [39m  finalizeEvent[33m,[39m
[90m [2m‚ùØ[22m extensions/nostr/src/nostr-bus.fuzz.test.ts:[2m2:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/45]‚éØ[22m[39m

[41m[1m FAIL [22m[49m extensions/nostr/src/nostr-bus.test.ts[2m [ extensions/nostr/src/nostr-bus.test.ts ][22m
[31m[1mError[22m: Cannot find package 'nostr-tools' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/nostr/src/nostr-bus.ts'[39m
[36m [2m‚ùØ[22m extensions/nostr/src/nostr-bus.ts:[2m1:1[22m[39m
    [90m  1| [39m[35mimport[39m {
    [90m   | [39m[31m^[39m
    [90m  2| [39m  [33mSimplePool[39m[33m,[39m
    [90m  3| [39m  finalizeEvent[33m,[39m
[90m [2m‚ùØ[22m extensions/nostr/src/nostr-bus.test.ts:[2m2:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/45]‚éØ[22m[39m

[41m[1m FAIL [22m[49m extensions/nostr/src/nostr-profile-import.test.ts[2m [ extensions/nostr/src/nostr-profile-import.test.ts ][22m
[31m[1mError[22m: Cannot find package 'nostr-tools' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/nostr/src/nostr-profile-import.ts'[39m
[36m [2m‚ùØ[22m extensions/nostr/src/nostr-profile-import.ts:[2m8:1[22m[39m
    [90m  6| [39m */[39m
    [90m  7| [39m
    [90m  8| [39m[35mimport[39m { [33mSimplePool[39m[33m,[39m verifyEvent[33m,[39m type [33mEvent[39m } [35mfrom[39m [32m"nostr-tools"[39m[33m;[39m
    [90m   | [39m[31m^[39m
    [90m  9| [39m
    [90m 10| [39mimport { contentToProfile, type ProfileContent } from "./nostr-profile‚Ä¶
[90m [2m‚ùØ[22m extensions/nostr/src/nostr-profile-import.test.ts:[2m7:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/45]‚éØ[22m[39m

[41m[1m FAIL [22m[49m extensions/nostr/src/nostr-profile.fuzz.test.ts[2m [ extensions/nostr/src/nostr-profile.fuzz.test.ts ][22m
[31m[1mError[22m: Cannot find package 'nostr-tools' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/nostr/src/nostr-profile.ts'[39m
[36m [2m‚ùØ[22m extensions/nostr/src/nostr-profile.ts:[2m8:1[22m[39m
    [90m  6| [39m */[39m
    [90m  7| [39m
    [90m  8| [39m[35mimport[39m { finalizeEvent[33m,[39m [33mSimplePool[39m[33m,[39m type [33mEvent[39m } [35mfrom[39m [32m"nostr-tools"[39m[33m;[39m
    [90m   | [39m[31m^[39m
    [90m  9| [39mimport { type NostrProfile, NostrProfileSchema } from "./config-schema‚Ä¶
    [90m 10| [39m
[90m [2m‚ùØ[22m extensions/nostr/src/nostr-profile.fuzz.test.ts:[2m2:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/45]‚éØ[22m[39m

[41m[1m FAIL [22m[49m extensions/nostr/src/nostr-profile.test.ts[2m [ extensions/nostr/src/nostr-profile.test.ts ][22m
[31m[1mError[22m: Cannot find package 'nostr-tools' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/nostr/src/nostr-profile.test.ts'[39m
[36m [2m‚ùØ[22m extensions/nostr/src/nostr-profile.test.ts:[2m2:1[22m[39m
    [90m  1| [39m[35mimport[39m { describe[33m,[39m expect[33m,[39m it[33m,[39m vi[33m,[39m beforeEach } [35mfrom[39m [32m"vitest"[39m[33m;[39m
    [90m  2| [39m[35mimport[39m { verifyEvent[33m,[39m getPublicKey } [35mfrom[39m [32m"nostr-tools"[39m[33m;[39m
    [90m   | [39m[31m^[39m
    [90m  3| [39m[35mimport[39m {
    [90m  4| [39m  createProfileEvent[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/45]‚éØ[22m[39m

[41m[1m FAIL [22m[49m extensions/nostr/src/types.test.ts[2m [ extensions/nostr/src/types.test.ts ][22m
[31m[1mError[22m: Cannot find package 'nostr-tools' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/nostr/src/nostr-bus.ts'[39m
[36m [2m‚ùØ[22m extensions/nostr/src/nostr-bus.ts:[2m1:1[22m[39m
    [90m  1| [39m[35mimport[39m {
    [90m   | [39m[31m^[39m
    [90m  2| [39m  [33mSimplePool[39m[33m,[39m
    [90m  3| [39m  finalizeEvent[33m,[39m
[90m [2m‚ùØ[22m extensions/nostr/src/types.ts:[2m2:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/45]‚éØ[22m[39m

[41m[1m FAIL [22m[49m extensions/matrix/src/matrix/client.test.ts[2m [ extensions/matrix/src/matrix/client.test.ts ][22m
[31m[1mError[22m: Cannot find package '@vector-im/matrix-bot-sdk' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/matrix/src/matrix/client/config.ts'[39m
[36m [2m‚ùØ[22m extensions/matrix/src/matrix/client/config.ts:[2m1:1[22m[39m
    [90m  1| [39m[35mimport[39m { [33mMatrixClient[39m } [35mfrom[39m [32m"@vector-im/matrix-bot-sdk"[39m[33m;[39m
    [90m   | [39m[31m^[39m
    [90m  2| [39m
    [90m  3| [39m[35mimport[39m type { [33mCoreConfig[39m } [35mfrom[39m [32m"../types.js"[39m[33m;[39m
[90m [2m‚ùØ[22m extensions/matrix/src/matrix/client.ts:[2m3:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/45]‚éØ[22m[39m


[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 19 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m extensions/memory-lancedb/index.test.ts[2m > [22mmemory plugin e2e[2m > [22mmemory plugin registers and initializes correctly
[41m[1m FAIL [22m[49m extensions/memory-lancedb/index.test.ts[2m > [22mmemory plugin e2e[2m > [22mconfig schema parses valid config
[41m[1m FAIL [22m[49m extensions/memory-lancedb/index.test.ts[2m > [22mmemory plugin e2e[2m > [22mconfig schema resolves env vars
[41m[1m FAIL [22m[49m extensions/memory-lancedb/index.test.ts[2m > [22mmemory plugin e2e[2m > [22mconfig schema rejects missing apiKey
[31m[1mError[22m: Cannot find package '@lancedb/lancedb' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/extensions/memory-lancedb/index.ts'[39m
[36m [2m‚ùØ[22m extensions/memory-lancedb/index.ts:[2m10:1[22m[39m
    [90m  8| [39m
    [90m  9| [39m[35mimport[39m { [33mType[39m } [35mfrom[39m [32m"@sinclair/typebox"[39m[33m;[39m
    [90m 10| [39m[35mimport[39m [33m*[39m [35mas[39m lancedb [35mfrom[39m [32m"@lancedb/lancedb"[39m[33m;[39m
    [90m   | [39m[31m^[39m
    [90m 11| [39m[35mimport[39m [33mOpenAI[39m [35mfrom[39m [32m"openai"[39m[33m;[39m
    [90m 12| [39m[35mimport[39m { randomUUID } [35mfrom[39m [32m"node:crypto"[39m[33m;[39m
[90m [2m‚ùØ[22m extensions/memory-lancedb/index.test.ts:[2m38:39[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/45]‚éØ[22m[39m

[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptToken[2m > [22mshould return existing token when user confirms to keep it
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptToken[2m > [22mshould prompt for new token when user doesn't keep existing
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptToken[2m > [22mshould use env token as initial value when provided
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptToken[2m > [22mshould validate token format
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptToken[2m > [22mshould return early when no existing token and no env token
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptUsername[2m > [22mshould prompt for username with validation
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptUsername[2m > [22mshould use existing username as initial value
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptClientId[2m > [22mshould prompt for client ID with validation
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptChannelName[2m > [22mshould return channel name when provided
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptChannelName[2m > [22mshould require a non-empty channel name
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptRefreshTokenSetup[2m > [22mshould return empty object when user declines
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptRefreshTokenSetup[2m > [22mshould prompt for credentials when user accepts
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mpromptRefreshTokenSetup[2m > [22mshould use existing values as initial prompts
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mconfigureWithEnvToken[2m > [22mshould return null when user declines env token
[41m[1m FAIL [22m[49m extensions/twitch/src/onboarding.test.ts[2m > [22monboarding helpers[2m > [22mconfigureWithEnvToken[2m > [22mshould prompt for username and clientId when using env token
[31m[1mError[22m: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'[39m
[36m [2m‚ùØ[22m src/telegram/bot-handlers.ts:[2m31:1[22m[39m
    [90m 29| [39m[35mimport[39m { migrateTelegramGroupConfig } [35mfrom[39m [32m"./group-migration.js"[39m[33m;[39m
    [90m 30| [39mimport { resolveTelegramInlineButtonsScope } from "./inline-buttons.js‚Ä¶
    [90m 31| [39m[35mimport[39m {
    [90m   | [39m[31m^[39m
    [90m 32| [39m  buildModelsKeyboard[33m,[39m
    [90m 33| [39m  buildProviderKeyboard[33m,[39m
[90m [2m‚ùØ[22m src/telegram/bot.ts:[2m32:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/45]‚éØ[22m[39m


[2m Test Files [22m [1m[31m28 failed[39m[22m[2m | [22m[1m[32m46 passed[39m[22m[90m (74)[39m
[2m      Tests [22m [1m[31m19 failed[39m[22m[2m | [22m[1m[32m450 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (470)[39m
[2m   Start at [22m 10:56:48
[2m   Duration [22m 22.25s[2m (transform 29.72s, setup 89.15s, import 9.01s, tests 5.27s, environment 9ms)[22m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] Failed to save session memory: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[session-memory] Hook triggered for /new command

 [31m‚ùØ[39m src/media-understanding/attachments.ssrf.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 7[2mms[22m[39m
[31m     [31m√ó[31m blocks private IP URLs before fetching[39m[32m 6[2mms[22m[39m
[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: C:\WINDOWS\TEMP\openclaw-session-memory-gsEE5p\sessions\test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[session-memory] sessionContent length: [33m41[39m
[session-memory] Calling generateSlugViaLLM...

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[session-memory] Failed to save session memory: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: C:\WINDOWS\TEMP\openclaw-session-memory-9H6blr\sessions\test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[session-memory] sessionContent length: [33m49[39m
[session-memory] Calling generateSlugViaLLM...

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[session-memory] Failed to save session memory: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: C:\WINDOWS\TEMP\openclaw-session-memory-r0iDSG\sessions\test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[session-memory] sessionContent length: [33m48[39m
[session-memory] Calling generateSlugViaLLM...

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[session-memory] Failed to save session memory: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: C:\WINDOWS\TEMP\openclaw-session-memory-5z6K3p\sessions\test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[session-memory] sessionContent length: [33m71[39m
[session-memory] Calling generateSlugViaLLM...

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[session-memory] Failed to save session memory: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles empty session files gracefully
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles empty session files gracefully
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: C:\WINDOWS\TEMP\openclaw-session-memory-6I1BWT\sessions\test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles empty session files gracefully
[22m[39m[session-memory] sessionContent length: [33m0[39m
[session-memory] Using fallback timestamp slug: 1357
[session-memory] Generated filename: 2026-02-05-1357.md
[session-memory] Full path: C:\WINDOWS\TEMP\openclaw-session-memory-6I1BWT\memory\2026-02-05-1357.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles empty session files gracefully
[22m[39m[session-memory] Memory file written successfully
[session-memory] Session context saved to C:\WINDOWS\TEMP\openclaw-session-memory-6I1BWT\memory\2026-02-05-1357.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: C:\WINDOWS\TEMP\openclaw-session-memory-pGWmjD\sessions\test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[session-memory] sessionContent length: [33m46[39m
[session-memory] Calling generateSlugViaLLM...

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[session-memory] Failed to save session memory: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'

 [31m‚ùØ[39m src/hooks/bundled/session-memory/handler.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 1476[2mms[22m[39m
     [32m‚úì[39m skips non-command events[32m 5[2mms[22m[39m
     [32m‚úì[39m skips commands other than new[32m 1[2mms[22m[39m
[31m     [31m√ó[31m creates memory file with session content on /new command[39m[33m 1452[2mms[22m[39m
[31m     [31m√ó[31m filters out non-message entries (tool calls, system)[39m[32m 7[2mms[22m[39m
[31m     [31m√ó[31m filters out command messages starting with /[39m[32m 2[2mms[22m[39m
[31m     [31m√ó[31m respects custom messages config (limits to N messages)[39m[32m 2[2mms[22m[39m
[31m     [31m√ó[31m filters messages before slicing (fix for #2681)[39m[32m 2[2mms[22m[39m
     [32m‚úì[39m handles empty session files gracefully[32m 2[2mms[22m[39m
[31m     [31m√ó[31m handles session files with fewer messages than requested[39m[32m 2[2mms[22m[39m
 [31m‚ùØ[39m src/signal/monitor.event-handler.sender-prefix.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1371[2mms[22m[39m
[31m     [31m√ó[31m prefixes group bodies with sender label[39m[33m 1370[2mms[22m[39m
 [31m‚ùØ[39m src/commands/models.list.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[33m 1098[2mms[22m[39m
[31m     [31m√ó[31m models status resolves z.ai alias to canonical zai[39m[33m 1095[2mms[22m[39m
[31m     [31m√ó[31m models status plain outputs canonical zai model[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m models list outputs canonical zai key for configured z.ai model[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m models list plain outputs canonical zai key[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m models list provider filter normalizes z.ai alias[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m models list provider filter normalizes Z.AI alias casing[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m models list provider filter normalizes z-ai alias[39m[32m 0[2mms[22m[39m
[31m     [31m√ó[31m models list marks auth as unavailable when ZAI key is missing[39m[32m 0[2mms[22m[39m
 [31m‚ùØ[39m src/commands/onboard-non-interactive.token.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1474[2mms[22m[39m
[31m     [31m√ó[31m writes token profile config and stores the token[39m[33m 1473[2mms[22m[39m
 [31m‚ùØ[39m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 1262[2mms[22m[39m
[31m     [31m√ó[31m accepts guild messages when mentionPatterns match[39m[33m 1257[2mms[22m[39m
[31m     [31m√ó[31m accepts guild messages when mentionPatterns match even if another user is mentioned[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m accepts guild reply-to-bot messages as implicit mentions[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m forks thread sessions and injects starter context[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m treats forum threads as distinct sessions without channel payloads[39m[32m 1[2mms[22m[39m
[31m     [31m√ó[31m scopes thread sessions to the routed agent[39m[32m 0[2mms[22m[39m
 [31m‚ùØ[39m src/discord/monitor.slash.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 751[2mms[22m[39m
[31m     [31m√ó[31m skips tool results for native slash commands[39m[33m 750[2mms[22m[39m
 [31m‚ùØ[39m src/channel-web.barrel.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/index.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/command-control.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply.block-streaming.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply.directive.parse.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply.media-note.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply.heartbeat-typing.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply.queue.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply.raw-body.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/telegram/bot.test.ts [2m([22m[2m82 tests[22m[2m | [22m[31m82 failed[39m[2m)[22m[33m 23838[2mms[22m[39m
[31m     [31m√ó[31m installs grammY throttler[39m[33m 6336[2mms[22m[39m
[31m     [31m√ó[31m merges custom commands with native commands[39m[32m 298[2mms[22m[39m
[31m     [31m√ó[31m ignores custom commands that collide with native commands[39m[32m 285[2mms[22m[39m
[31m     [31m√ó[31m registers custom commands when native commands are disabled[39m[33m 380[2mms[22m[39m
[31m     [31m√ó[31m uses wrapped fetch when global fetch is available[39m[33m 615[2mms[22m[39m
[31m     [31m√ó[31m sequentializes updates by chat and thread[39m[32m 262[2mms[22m[39m
[31m     [31m√ó[31m routes callback_query payloads as messages and answers callbacks[39m[32m 277[2mms[22m[39m
[31m     [31m√ó[31m blocks callback_query when inline buttons are allowlist-only and sender not authorized[39m[32m 275[2mms[22m[39m
[31m     [31m√ó[31m edits commands list for pagination callbacks[39m[33m 335[2mms[22m[39m
[31m     [31m√ó[31m blocks pagination callbacks when allowlist rejects sender[39m[33m 302[2mms[22m[39m
[31m     [31m√ó[31m wraps inbound message with Telegram envelope[39m[32m 260[2mms[22m[39m
[31m     [31m√ó[31m requests pairing by default for unknown DM senders[39m[32m 243[2mms[22m[39m
[31m     [31m√ó[31m does not resend pairing code when a request is already pending[39m[32m 256[2mms[22m[39m
[31m     [31m√ó[31m triggers typing cue via onReplyStart[39m[32m 297[2mms[22m[39m
[31m     [31m√ó[31m accepts group messages when mentionPatterns match (without @botUsername)[39m[32m 267[2mms[22m[39m
[31m     [31m√ó[31m includes sender identity in group envelope headers[39m[32m 279[2mms[22m[39m
[31m     [31m√ó[31m reacts to mention-gated group messages when ackReaction is enabled[39m[32m 255[2mms[22m[39m
[31m     [31m√ó[31m clears native commands when disabled[39m[33m 309[2mms[22m[39m
[31m     [31m√ó[31m skips group messages when requireMention is enabled and no mention matches[39m[32m 265[2mms[22m[39m
[31m     [31m√ó[31m allows group messages when requireMention is enabled but mentions cannot be detected[39m[32m 269[2mms[22m[39m
[31m     [31m√ó[31m includes reply-to context when a Telegram reply is received[39m[32m 290[2mms[22m[39m
[31m     [31m√ó[31m uses quote text when a Telegram partial reply is received[39m[32m 248[2mms[22m[39m
[31m     [31m√ó[31m handles quote-only replies without reply metadata[39m[32m 230[2mms[22m[39m
[31m     [31m√ó[31m sends replies without native reply threading[39m[32m 270[2mms[22m[39m
[31m     [31m√ó[31m honors replyToMode=first for threaded replies[39m[32m 275[2mms[22m[39m
[31m     [31m√ó[31m prefixes final replies with responsePrefix[39m[32m 232[2mms[22m[39m
[31m     [31m√ó[31m honors replyToMode=all for threaded replies[39m[32m 210[2mms[22m[39m
[31m     [31m√ó[31m blocks group messages when telegram.groups is set without a wildcard[39m[32m 248[2mms[22m[39m
[31m     [31m√ó[31m skips group messages without mention when requireMention is enabled[39m[32m 265[2mms[22m[39m
[31m     [31m√ó[31m accepts group replies to the bot without explicit mention when requireMention is enabled[39m[32m 213[2mms[22m[39m
[31m     [31m√ó[31m honors routed group activation from session store[39m[32m 271[2mms[22m[39m
[31m     [31m√ó[31m routes DMs by telegram accountId binding[39m[32m 235[2mms[22m[39m
[31m     [31m√ó[31m allows per-group requireMention override[39m[32m 235[2mms[22m[39m
[31m     [31m√ó[31m allows per-topic requireMention override[39m[32m 262[2mms[22m[39m
[31m     [31m√ó[31m inherits group allowlist + requireMention in topics[39m[32m 218[2mms[22m[39m
[31m     [31m√ó[31m prefers topic allowFrom over group allowFrom[39m[32m 241[2mms[22m[39m
[31m     [31m√ó[31m honors groups default when no explicit group override exists[39m[32m 217[2mms[22m[39m
[31m     [31m√ó[31m does not block group messages when bot username is unknown[39m[32m 196[2mms[22m[39m
[31m     [31m√ó[31m sends GIF replies as animations[39m[32m 270[2mms[22m[39m
[31m     [31m√ó[31m blocks all group messages when groupPolicy is 'disabled'[39m[32m 211[2mms[22m[39m
[31m     [31m√ó[31m blocks group messages from senders not in allowFrom when groupPolicy is 'allowlist'[39m[32m 274[2mms[22m[39m
[31m     [31m√ó[31m allows group messages from senders in allowFrom (by ID) when groupPolicy is 'allowlist'[39m[32m 179[2mms[22m[39m
[31m     [31m√ó[31m allows group messages from senders in allowFrom (by username) when groupPolicy is 'allowlist'[39m[32m 220[2mms[22m[39m
[31m     [31m√ó[31m allows group messages from telegram:-prefixed allowFrom entries when groupPolicy is 'allowlist'[39m[32m 248[2mms[22m[39m
[31m     [31m√ó[31m allows group messages from tg:-prefixed allowFrom entries case-insensitively when groupPolicy is 'allowlist'[39m[32m 201[2mms[22m[39m
[31m     [31m√ó[31m allows all group messages when groupPolicy is 'open'[39m[32m 192[2mms[22m[39m
[31m     [31m√ó[31m matches usernames case-insensitively when groupPolicy is 'allowlist'[39m[32m 174[2mms[22m[39m
[31m     [31m√ó[31m allows direct messages regardless of groupPolicy[39m[32m 181[2mms[22m[39m
[31m     [31m√ó[31m allows direct messages with tg/Telegram-prefixed allowFrom entries[39m[32m 180[2mms[22m[39m
[31m     [31m√ó[31m allows direct messages with telegram:-prefixed allowFrom entries[39m[32m 175[2mms[22m[39m
[31m     [31m√ó[31m allows group messages with wildcard in allowFrom when groupPolicy is 'allowlist'[39m[32m 160[2mms[22m[39m
[31m     [31m√ó[31m blocks group messages with no sender ID when groupPolicy is 'allowlist'[39m[32m 150[2mms[22m[39m
[31m     [31m√ó[31m matches telegram:-prefixed allowFrom entries in group allowlist[39m[32m 154[2mms[22m[39m
[31m     [31m√ó[31m matches tg:-prefixed allowFrom entries case-insensitively in group allowlist[39m[32m 157[2mms[22m[39m
[31m     [31m√ó[31m blocks group messages when groupPolicy allowlist has no groupAllowFrom[39m[32m 159[2mms[22m[39m
[31m     [31m√ó[31m allows control commands with TG-prefixed groupAllowFrom entries[39m[32m 152[2mms[22m[39m
[31m     [31m√ó[31m isolates forum topic sessions and carries thread metadata[39m[32m 161[2mms[22m[39m
[31m     [31m√ó[31m falls back to General topic thread id for typing in forums[39m[32m 129[2mms[22m[39m
[31m     [31m√ó[31m routes General topic replies using thread id 1[39m[32m 167[2mms[22m[39m
[31m     [31m√ó[31m applies topic skill filters and system prompts[39m[32m 184[2mms[22m[39m
[31m     [31m√ó[31m passes message_thread_id to topic replies[39m[32m 174[2mms[22m[39m
[31m     [31m√ó[31m threads native command replies inside topics[39m[32m 142[2mms[22m[39m
[31m     [31m√ó[31m sets command target session key for dm topic commands[39m[32m 137[2mms[22m[39m
[31m     [31m√ó[31m allows native DM commands for paired users[39m[32m 195[2mms[22m[39m
[31m     [31m√ó[31m blocks native DM commands for unpaired users[39m[32m 148[2mms[22m[39m
[31m     [31m√ó[31m skips tool summaries for native slash commands[39m[32m 155[2mms[22m[39m
[31m     [31m√ó[31m dedupes duplicate message updates by update_id[39m[32m 152[2mms[22m[39m
[31m     [31m√ó[31m dedupes duplicate callback_query updates by update_id[39m[32m 155[2mms[22m[39m
[31m     [31m√ó[31m allows distinct callback_query ids without update_id[39m[32m 139[2mms[22m[39m
[31m     [31m√ó[31m registers message_reaction handler[39m[32m 146[2mms[22m[39m
[31m     [31m√ó[31m enqueues system event for reaction[39m[32m 148[2mms[22m[39m
[31m     [31m√ó[31m skips reaction when reactionNotifications is off[39m[32m 157[2mms[22m[39m
[31m     [31m√ó[31m defaults reactionNotifications to own[39m[32m 169[2mms[22m[39m
[31m     [31m√ó[31m allows reaction in all mode regardless of message sender[39m[32m 155[2mms[22m[39m
[31m     [31m√ó[31m skips reaction in own mode when message is not sent by bot[39m[32m 142[2mms[22m[39m
[31m     [31m√ó[31m allows reaction in own mode when message is sent by bot[39m[32m 131[2mms[22m[39m
[31m     [31m√ó[31m skips reaction from bot users[39m[32m 141[2mms[22m[39m
[31m     [31m√ó[31m skips reaction removal (only processes added reactions)[39m[32m 134[2mms[22m[39m
[31m     [31m√ó[31m uses correct session key for forum group reactions with topic[39m[32m 162[2mms[22m[39m
[31m     [31m√ó[31m uses correct session key for forum group reactions in general topic[39m[32m 166[2mms[22m[39m
[31m     [31m√ó[31m uses correct session key for regular group reactions without topic[39m[32m 149[2mms[22m[39m
[31m     [31m√ó[31m uses thread session key for dm reactions with topic id[39m[32m 139[2mms[22m[39m
 [31m‚ùØ[39m src/cli/dns-cli.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/cli/hooks-cli.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/cli/program.nodes-basic.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/cli/program.nodes-media.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/cli/program.smoke.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/cli/run-main.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/agent.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/agents.add.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/channels.surfaces-signal-runtime-errors-channels-status-output.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/channels.adds-non-default-telegram-account.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/agents.identity.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/agents.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/configure.gateway-auth.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/health.command.coverage.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/health.snapshot.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/health.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/onboard-channels.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/status.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/cron/isolated-agent.skips-delivery-without-whatsapp-recipient-besteffortdeliver-true.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-embedded-runner-extraparams.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-embedded-runner.applygoogleturnorderingfix.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-embedded-runner.createsystempromptoverride.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-embedded-runner.buildembeddedsandboxinfo.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-embedded-runner.get-dm-history-limit-from-session-key.returns-undefined-sessionkey-is-undefined.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-embedded-runner.get-dm-history-limit-from-session-key.falls-back-provider-default-per-dm-not.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-embedded-runner.limithistoryturns.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-embedded-subscribe.tools.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-embedded-runner.splitsdktools.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-tools.safe-bins.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-tools.workspace-paths.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/session-tool-result-guard.tool-result-persist-hook.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/discord/monitor.tool-result.sends-status-replies-responseprefix.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/discord/monitor.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/imessage/monitor.updates-last-route-chat-id-direct-messages.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/infra/heartbeat-runner.respects-ackmaxchars-heartbeat-acks.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/infra/heartbeat-runner.returns-default-unset.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/memory/backend-config.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/plugin-sdk/index.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/infra/heartbeat-runner.scheduler.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/infra/heartbeat-runner.sender-prefers-delivery-target.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/security/audit.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/plugins/loader.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/plugins/tools.optional.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/signal/monitor.tool-result.pairs-uuid-only-senders-uuid-allowlist-entry.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/signal/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/slack/monitor.threading.missing-thread-ts.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/slack/monitor.tool-result.forces-thread-replies-replytoid-is-set.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/slack/monitor.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/telegram/bot-message-context.dm-threads.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/telegram/bot-message-context.sender-prefix.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/telegram/bot-native-commands.plugin-auth.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/telegram/bot-native-commands.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.broadcast-groups.skips-unknown-broadcast-agent-ids-agents-list.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/wizard/onboarding.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.partial-reply-gating.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.typing-controller-idle.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply/commands-approve.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply/commands-info.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply/commands-parsing.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply/commands-policy.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply/commands.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply/directive-handling.model.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply/dispatch-from-config.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/auto-reply/reply/queue.collect-routing.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/channels/web/index.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/commands/models/list.status.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/infra/outbound/message-action-runner.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/discord/monitor/message-handler.inbound-contract.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/infra/outbound/message-action-runner.threading.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/infra/outbound/targets.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/signal/monitor/event-handler.inbound-contract.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/agents/pi-embedded-runner/run/attempt.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/slack/monitor/message-handler/prepare.inbound-contract.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/slack/monitor/message-handler/prepare.sender-prefix.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists the user message when prompt fails before assistant output
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-error ctx=16000 (warn<32000) source=model[39m

 [32m‚úì[39m src/docker-setup.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 717[2mms[22m[39m
     [33m[2m‚úì[22m[39m handles unset optional env vars under strict mode [33m 407[2mms[22m[39m
     [33m[2m‚úì[22m[39m plumbs OPENCLAW_DOCKER_APT_PACKAGES into .env and docker build args [33m 308[2mms[22m[39m
[90mstderr[2m | src/agents/bash-tools.exec.pty-fallback.test.ts[2m > [22m[2mexec falls back when PTY spawn fails
[22m[39m[32m[exec][39m [33mPTY spawn failed (Error: spawn EBADF); retrying without PTY for "printf ok".[39m

 [31m‚ùØ[39m src/web/auto-reply/monitor/process-message.inbound-contract.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m‚ùØ[39m src/web/auto-reply/monitor/group-gating.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/agents/bash-tools.exec.approval-id.test.ts[2m > [22m[2mexec approvals[2m > [22m[2mhonors ask=off for elevated gateway exec without prompting
[22m[39m[32m[exec][39m [36melevated command echo ok[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mappends new user + assistant after existing transcript entries
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=model[39m

 [32m‚úì[39m src/agents/bash-tools.exec.pty-fallback.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 1275[2mms[22m[39m
   [33m[2m‚úì[22m[39m exec falls back when PTY spawn fails [33m 1273[2mms[22m[39m
[90mstderr[2m | src/agents/pi-tools-agent-config.test.ts[2m > [22m[2mAgent-specific tool filtering[2m > [22m[2mshould apply provider-specific tool profile overrides
[22m[39m[34m[tools][39m [33mtools.profile (coding) allowlist contains unknown entries (group:memory). These entries won't match any tool unless the plugin is enabled.[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists multi-turn user/assistant ordering across runs
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=model[39m

 [32m‚úì[39m src/agents/bash-tools.exec.pty.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 2158[2mms[22m[39m
   [33m[2m‚úì[22m[39m exec supports pty output [33m 2156[2mms[22m[39m
[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists multi-turn user/assistant ordering across runs
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=model[39m

[90mstdout[2m | src/agents/bash-tools.exec.approval-id.test.ts[2m > [22m[2mexec approvals[2m > [22m[2mrequires approval for elevated ask when allowlist misses
[22m[39m[32m[exec][39m [36melevated command echo ok[39m

 [32m‚úì[39m src/agents/bash-tools.exec.approval-id.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 1717[2mms[22m[39m
     [33m[2m‚úì[22m[39m honors ask=off for elevated gateway exec without prompting [33m 1673[2mms[22m[39m
 [32m‚úì[39m src/agents/bash-tools.exec.background-abort.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 957[2mms[22m[39m
   [33m[2m‚úì[22m[39m yielded background exec still times out [33m 309[2mms[22m[39m
[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mrepairs orphaned user messages and continues
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=model[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mrepairs orphaned single-user sessions and continues
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=model[39m

 [32m‚úì[39m src/agents/pi-embedded-runner.test.ts [2m([22m[2m7 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[33m 3711[2mms[22m[39m
     [33m[2m‚úì[22m[39m persists the user message when prompt fails before assistant output [33m 1256[2mms[22m[39m
     [33m[2m‚úì[22m[39m appends new user + assistant after existing transcript entries [33m 620[2mms[22m[39m
     [33m[2m‚úì[22m[39m persists multi-turn user/assistant ordering across runs [33m 548[2mms[22m[39m
 [32m‚úì[39m src/plugins/install.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 1781[2mms[22m[39m
     [33m[2m‚úì[22m[39m installs into ~/.openclaw/extensions and uses unscoped id [33m 397[2mms[22m[39m
     [33m[2m‚úì[22m[39m rejects installing when plugin already exists [33m 354[2mms[22m[39m
     [33m[2m‚úì[22m[39m allows updates when mode is update [33m 686[2mms[22m[39m
     [33m[2m‚úì[22m[39m rejects packages without openclaw.extensions [33m 329[2mms[22m[39m
 [32m‚úì[39m src/infra/ports.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 146[2mms[22m[39m
 [32m‚úì[39m src/cron/isolated-agent.uses-last-non-empty-agent-text-as.test.ts [2m([22m[2m13 tests[22m[2m)[22m[33m 3461[2mms[22m[39m
     [33m[2m‚úì[22m[39m uses last non-empty agent text as summary [33m 1301[2mms[22m[39m
 [32m‚úì[39m src/infra/tailscale.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 400[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-tools-agent-config.test.ts [2m([22m[2m15 tests[22m[2m)[22m[33m 1670[2mms[22m[39m
     [33m[2m‚úì[22m[39m should run exec synchronously when process is denied [33m 1638[2mms[22m[39m
(node:41936) [DEP0190] DeprecationWarning: Passing args to a child process with shell option true can lead to security vulnerabilities, as the arguments are not escaped, only concatenated.
(Use `node --trace-deprecation ...` to show where the warning was created)
DeprecationWarning: Passing args to a child process with shell option true can lead to security vulnerabilities, as the arguments are not escaped, only concatenated.
    at normalizeSpawnArguments (node:child_process:644:15)
    at spawn (node:child_process:789:13)
    at execFile (node:child_process:349:17)
    at execFile (node:child_process:245:21)
    at execLaunchctl (C:/Users/Specter/Desktop/Helix/helix-runtime/src/daemon/launchd.ts:109:38)
    at isLaunchAgentListed (C:/Users/Specter/Desktop/Helix/helix-runtime/src/daemon/launchd.ts:189:21)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/daemon/launchd.test.ts:111:28
    at withLaunchctlStub (C:/Users/Specter/Desktop/Helix/helix-runtime/src/daemon/launchd.test.ts:68:11)
    at C:/Users/Specter/Desktop/Helix/helix-runtime/src/daemon/launchd.test.ts:110:5
    at file:///C:/Users/Specter/Desktop/Helix/helix-runtime/node_modules/@vitest/runner/dist/index.js:915:20
 [32m‚úì[39m src/daemon/launchd.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 654[2mms[22m[39m
     [33m[2m‚úì[22m[39m enables service before bootstrap (clears persisted disabled state) [33m 369[2mms[22m[39m
 [32m‚úì[39m src/security/fix.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 306[2mms[22m[39m
 [32m‚úì[39m src/agents/openai-responses.reasoning-replay.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 2675[2mms[22m[39m
     [33m[2m‚úì[22m[39m replays reasoning for tool-call-only turns (OpenAI requires it) [33m 1371[2mms[22m[39m
     [33m[2m‚úì[22m[39m still replays reasoning when paired with an assistant message [33m 1299[2mms[22m[39m
 [32m‚úì[39m src/config/config.legacy-config-detection.rejects-routing-allowfrom.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 2152[2mms[22m[39m
 [32m‚úì[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.should-allow-agent-specific-docker-settings-beyond.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 1312[2mms[22m[39m
     [33m[2m‚úì[22m[39m should allow agent-specific docker settings beyond setupCommand [33m 844[2mms[22m[39m
 [32m‚úì[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.should-use-global-sandbox-config-no-agent.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 1356[2mms[22m[39m
     [33m[2m‚úì[22m[39m should use global sandbox config when no agent-specific config exists [33m 864[2mms[22m[39m
 [32m‚úì[39m src/config/config.legacy-config-detection.accepts-imessage-dmpolicy.test.ts [2m([22m[2m23 tests[22m[2m)[22m[33m 1926[2mms[22m[39m
 [32m‚úì[39m src/cron/isolated-agent.delivers-response-has-heartbeat-ok-but-includes.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1527[2mms[22m[39m
     [33m[2m‚úì[22m[39m delivers when response has HEARTBEAT_OK but includes media [33m 1306[2mms[22m[39m
 [32m‚úì[39m src/config/config.plugin-validation.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 700[2mms[22m[39m
 [32m‚úì[39m src/cli/daemon-cli.coverage.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 841[2mms[22m[39m
     [33m[2m‚úì[22m[39m probes gateway status by default [33m 599[2mms[22m[39m
 [32m‚úì[39m src/browser/screenshot.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1516[2mms[22m[39m
     [33m[2m‚úì[22m[39m shrinks oversized images to <=2000x2000 and <=5MB [33m 1508[2mms[22m[39m
 [32m‚úì[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.should-use-agent-specific-workspaceroot.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 1507[2mms[22m[39m
     [33m[2m‚úì[22m[39m should use agent-specific workspaceRoot [33m 870[2mms[22m[39m
     [33m[2m‚úì[22m[39m should prefer agent config over global for multiple agents [33m 321[2mms[22m[39m
 [32m‚úì[39m src/config/config.nix-integration-u3-u5-u9.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 1442[2mms[22m[39m
 [32m‚úì[39m src/agents/system-prompt-params.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 1042[2mms[22m[39m
     [33m[2m‚úì[22m[39m detects repo root from workspaceDir [33m 1034[2mms[22m[39m
[90mstdout[2m | src/agents/claude-cli-runner.test.ts[2m > [22m[2mrunClaudeCliAgent[2m > [22m[2mstarts a new session with --session-id when none is provided
[22m[39m[32m[agent/claude-cli][39m [36mcli exec: provider=claude-cli model=opus promptChars=2[39m

[90mstdout[2m | src/agents/claude-cli-runner.test.ts[2m > [22m[2mrunClaudeCliAgent[2m > [22m[2muses --resume when a claude session id is provided
[22m[39m[32m[agent/claude-cli][39m [36mcli exec: provider=claude-cli model=opus promptChars=2[39m

[90mstdout[2m | src/agents/claude-cli-runner.test.ts[2m > [22m[2mrunClaudeCliAgent[2m > [22m[2mserializes concurrent claude-cli runs
[22m[39m[32m[agent/claude-cli][39m [36mcli exec: provider=claude-cli model=opus promptChars=5[39m

[90mstdout[2m | src/agents/claude-cli-runner.test.ts[2m > [22m[2mrunClaudeCliAgent[2m > [22m[2mserializes concurrent claude-cli runs
[22m[39m[32m[agent/claude-cli][39m [36mcli exec: provider=claude-cli model=opus promptChars=6[39m

 [32m‚úì[39m src/agents/claude-cli-runner.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 1059[2mms[22m[39m
     [33m[2m‚úì[22m[39m starts a new session with --session-id when none is provided [33m 1047[2mms[22m[39m
[90mstdout[2m | src/agents/cli-runner.test.ts[2m > [22m[2mrunCliAgent resume cleanup[2m > [22m[2mkills stale resume processes for codex sessions
[22m[39m[32m[agent/claude-cli][39m [36mcli exec: provider=codex-cli model=gpt-5.2-codex promptChars=2[39m

 [32m‚úì[39m src/agents/cli-runner.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 1059[2mms[22m[39m
     [33m[2m‚úì[22m[39m kills stale resume processes for codex sessions [33m 1056[2mms[22m[39m
 [32m‚úì[39m src/media-understanding/apply.test.ts [2m([22m[2m16 tests[22m[2m)[22m[33m 627[2mms[22m[39m
     [33m[2m‚úì[22m[39m sets Transcript and replaces Body when audio transcription succeeds [33m 595[2mms[22m[39m
 [32m‚úì[39m src/infra/outbound/message.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 923[2mms[22m[39m
     [33m[2m‚úì[22m[39m normalizes Teams alias [33m 692[2mms[22m[39m
 [32m‚úì[39m src/agents/skills.buildworkspaceskillstatus.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 1058[2mms[22m[39m
     [33m[2m‚úì[22m[39m reports missing requirements and install options [33m 322[2mms[22m[39m
     [33m[2m‚úì[22m[39m respects OS-gated skills [33m 344[2mms[22m[39m
     [33m[2m‚úì[22m[39m filters install options by OS [33m 372[2mms[22m[39m
 [32m‚úì[39m src/commands/doctor.runs-legacy-state-migrations-yes-mode-without.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 1078[2mms[22m[39m
     [33m[2m‚úì[22m[39m runs legacy state migrations in yes mode without prompting [33m 1023[2mms[22m[39m
 [32m‚úì[39m src/agents/openclaw-tools.session-status.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 1038[2mms[22m[39m
     [33m[2m‚úì[22m[39m returns a status card for the current session [33m 1028[2mms[22m[39m
 [32m‚úì[39m src/agents/sandbox.resolveSandboxContext.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 925[2mms[22m[39m
     [33m[2m‚úì[22m[39m does not sandbox the agent main session in non-main mode [33m 703[2mms[22m[39m
 [32m‚úì[39m src/agents/sandbox-skills.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 861[2mms[22m[39m
     [33m[2m‚úì[22m[39m copies skills into the sandbox when workspaceAccess is ro [33m 726[2mms[22m[39m
 [32m‚úì[39m src/commands/doctor.falls-back-legacy-sandbox-image-missing.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 766[2mms[22m[39m
     [33m[2m‚úì[22m[39m runs legacy state migrations in non-interactive mode without prompting [33m 765[2mms[22m[39m
 [32m‚úì[39m src/web/media.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 831[2mms[22m[39m
     [33m[2m‚úì[22m[39m falls back to JPEG when PNG alpha cannot fit under cap [33m 692[2mms[22m[39m
 [32m‚úì[39m src/commands/doctor.migrates-routing-allowfrom-channels-whatsapp-allowfrom.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 812[2mms[22m[39m
     [33m[2m‚úì[22m[39m migrates routing.allowFrom to channels.whatsapp.allowFrom [33m 792[2mms[22m[39m
 [32m‚úì[39m src/commands/message.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 833[2mms[22m[39m
     [33m[2m‚úì[22m[39m defaults channel when only one configured [33m 767[2mms[22m[39m
 [32m‚úì[39m src/commands/doctor.warns-state-directory-is-missing.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 814[2mms[22m[39m
     [33m[2m‚úì[22m[39m warns when the state directory is missing [33m 783[2mms[22m[39m
 [32m‚úì[39m src/commands/doctor.warns-per-agent-sandbox-docker-browser-prune.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 784[2mms[22m[39m
     [33m[2m‚úì[22m[39m warns when per-agent sandbox docker/browser/prune overrides are ignored under shared scope [33m 766[2mms[22m[39m
 [32m‚úì[39m src/config/config.identity-defaults.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 881[2mms[22m[39m
 [32m‚úì[39m src/memory/index.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 714[2mms[22m[39m
 [32m‚úì[39m src/agents/subagent-announce.format.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 731[2mms[22m[39m
     [33m[2m‚úì[22m[39m sends instructional message to main agent with status and findings [33m 586[2mms[22m[39m
 [32m‚úì[39m src/hooks/gmail-setup-utils.test.ts [2m([22m[2m3 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[33m 631[2mms[22m[39m
     [33m[2m‚úì[22m[39m includes stdout and exit code when tailscale serve fails [33m 525[2mms[22m[39m
[90mstdout[2m | src/browser/server.serves-status-starts-browser-requested.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mserves status + starts browser when requested
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49683/[39m

[90mstdout[2m | src/browser/server.serves-status-starts-browser-requested.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mhandles tabs: list, open, focus conflict on ambiguous prefix
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49686/[39m

 [32m‚úì[39m src/browser/server.serves-status-starts-browser-requested.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 232[2mms[22m[39m
 [32m‚úì[39m src/commands/agent.delivery.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 596[2mms[22m[39m
     [33m[2m‚úì[22m[39m prefers explicit accountId for outbound delivery [33m 591[2mms[22m[39m
[90mstdout[2m | src/agents/skills.build-workspace-skills-prompt.syncs-merged-skills-into-target-workspace.test.ts[2m > [22m[2mbuildWorkspaceSkillsPrompt[2m > [22m[2mapplies skill filters, including empty lists
[22m[39m[skills] Applying skill filter: alpha
[skills] After filter: alpha
[skills] Applying skill filter: (none)
[skills] After filter: 

 [32m‚úì[39m src/agents/skills.build-workspace-skills-prompt.syncs-merged-skills-into-target-workspace.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 733[2mms[22m[39m
     [33m[2m‚úì[22m[39m filters skills based on env/config gates [33m 362[2mms[22m[39m
     [33m[2m‚úì[22m[39m applies skill filters, including empty lists [33m 334[2mms[22m[39m
[90mstdout[2m | src/web/login.test.ts[2m > [22m[2mweb login[2m > [22m[2mloginWeb waits for connection and closes
[22m[39mWaiting for WhatsApp connection...

[90mstdout[2m | src/web/login.test.ts[2m > [22m[2mweb login[2m > [22m[2mloginWeb waits for connection and closes
[22m[39m‚úÖ Linked! Credentials saved for future sends.

 [32m‚úì[39m src/cli/skills-cli.test.ts [2m([22m[2m13 tests[22m[2m)[22m[33m 541[2mms[22m[39m
 [32m‚úì[39m src/commands/sandbox-explain.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 486[2mms[22m[39m
     [33m[2m‚úì[22m[39m prints JSON shape + fix-it keys [33m 484[2mms[22m[39m
 [32m‚úì[39m src/infra/transport-ready.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 607[2mms[22m[39m
     [33m[2m‚úì[22m[39m returns when the check succeeds and logs after the delay [33m 363[2mms[22m[39m
 [32m‚úì[39m src/web/login.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 563[2mms[22m[39m
     [33m[2m‚úì[22m[39m loginWeb waits for connection and closes [33m 561[2mms[22m[39m
 [32m‚úì[39m src/agents/sandbox-merge.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 479[2mms[22m[39m
     [33m[2m‚úì[22m[39m resolves sandbox scope deterministically [33m 476[2mms[22m[39m
 [32m‚úì[39m src/process/exec.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 85[2mms[22m[39m
 [32m‚úì[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.includes-session-status-default-sandbox-allowlist.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 481[2mms[22m[39m
     [33m[2m‚úì[22m[39m includes session_status in default sandbox allowlist [33m 479[2mms[22m[39m
 [32m‚úì[39m src/agents/skills.build-workspace-skills-prompt.prefers-workspace-skills-managed-skills.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 485[2mms[22m[39m
     [33m[2m‚úì[22m[39m gates by bins, config, and always [33m 324[2mms[22m[39m
[90mstdout[2m | src/canvas-host/server.test.ts[2m > [22m[2mcanvas host[2m > [22m[2mcreates a default index.html when missing
[22m[39mcanvas host listening on http://127.0.0.1:49691 (root C:\WINDOWS\TEMP\openclaw-canvas-KHj2hb)

[90mstdout[2m | src/canvas-host/server.test.ts[2m > [22m[2mcanvas host[2m > [22m[2mskips live reload injection when disabled
[22m[39mcanvas host listening on http://127.0.0.1:49693 (root C:\WINDOWS\TEMP\openclaw-canvas-YskCQq)

[90mstdout[2m | src/canvas-host/server.test.ts[2m > [22m[2mcanvas host[2m > [22m[2mreuses a handler without closing it twice
[22m[39mcanvas host listening on http://127.0.0.1:49699 (root C:\WINDOWS\TEMP\openclaw-canvas-PiRuaF)

[90mstdout[2m | src/canvas-host/server.test.ts[2m > [22m[2mcanvas host[2m > [22m[2mserves HTML with injection and broadcasts reload on file changes
[22m[39mcanvas host listening on http://127.0.0.1:49700 (root C:\WINDOWS\TEMP\openclaw-canvas-wTTv60)

 [32m‚úì[39m src/process/child-process-bridge.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 342[2mms[22m[39m
     [33m[2m‚úì[22m[39m forwards SIGTERM to the wrapped child [33m 340[2mms[22m[39m
[90mstderr[2m | src/memory/manager.batch.test.ts[2m > [22m[2mmemory indexing with OpenAI batches[2m > [22m[2mfalls back to non-batch on failure and resets failures after success
[22m[39m[31m[memory][39m [33membeddings: openai batch failed (1/2); keeping batch enabled; falling back to non-batch embeddings: openai batch create failed: 500 batch failed[39m

[90mstdout[2m | src/canvas-host/server.test.ts[2m > [22m[2mcanvas host[2m > [22m[2mserves the gateway-hosted A2UI scaffold
[22m[39mcanvas host listening on http://127.0.0.1:49704 (root C:\WINDOWS\TEMP\openclaw-canvas-sNEW18)

 [32m‚úì[39m src/canvas-host/server.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 457[2mms[22m[39m
     [33m[2m‚úì[22m[39m serves HTML with injection and broadcasts reload on file changes [33m 388[2mms[22m[39m
[90mstderr[2m | src/memory/manager.batch.test.ts[2m > [22m[2mmemory indexing with OpenAI batches[2m > [22m[2mdisables batch after repeated failures and skips batch thereafter
[22m[39m[31m[memory][39m [33membeddings: openai batch failed (1/2); keeping batch enabled; falling back to non-batch embeddings: openai batch create failed: 500 batch failed[39m

[90mstderr[2m | src/memory/manager.embedding-batches.test.ts[2m > [22m[2mmemory embedding batches[2m > [22m[2mretries embeddings on rate limit errors
[22m[39m[31m[memory][39m [33membeddings rate limited; retrying in 505ms[39m

[90mstderr[2m | src/memory/manager.embedding-batches.test.ts[2m > [22m[2mmemory embedding batches[2m > [22m[2mretries embeddings on rate limit errors
[22m[39m[31m[memory][39m [33membeddings rate limited; retrying in 1062ms[39m

[90mstderr[2m | src/memory/manager.batch.test.ts[2m > [22m[2mmemory indexing with OpenAI batches[2m > [22m[2mdisables batch after repeated failures and skips batch thereafter
[22m[39m[31m[memory][39m [33membeddings: openai batch failed (2/2); disabling batch; falling back to non-batch embeddings: openai batch create failed: 500 batch failed[39m

[90mstderr[2m | src/memory/manager.embedding-batches.test.ts[2m > [22m[2mmemory embedding batches[2m > [22m[2mretries embeddings on transient 5xx errors
[22m[39m[31m[memory][39m [33membeddings rate limited; retrying in 554ms[39m

[90mstderr[2m | src/memory/manager.embedding-batches.test.ts[2m > [22m[2mmemory embedding batches[2m > [22m[2mretries embeddings on transient 5xx errors
[22m[39m[31m[memory][39m [33membeddings rate limited; retrying in 1148ms[39m

 [32m‚úì[39m src/memory/manager.batch.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 447[2mms[22m[39m
 [32m‚úì[39m src/memory/manager.embedding-batches.test.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 458[2mms[22m[39m
 [32m‚úì[39m src/browser/pw-tools-core.screenshots-element-selector.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 465[2mms[22m[39m
     [33m[2m‚úì[22m[39m screenshots an element selector [33m 460[2mms[22m[39m
 [32m‚úì[39m src/config/config.env-vars.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 353[2mms[22m[39m
 [32m‚úì[39m src/agents/subagent-registry.persistence.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 536[2mms[22m[39m
 [32m‚úì[39m src/config/config.pruning-defaults.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 462[2mms[22m[39m
[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mcovers additional endpoint branches
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49707/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mGET / without profile uses default profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49710/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mPOST /start without profile uses default profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49712/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mPOST /stop without profile uses default profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49714/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mGET /tabs without profile uses default profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49717/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mPOST /tabs/open without profile uses default profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49720/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mGET /profiles returns list of profiles
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49723/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mGET /tabs?profile=openclaw returns tabs for specified profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49725/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mPOST /tabs/open?profile=openclaw opens tab in specified profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49728/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mGET /tabs?profile=unknown returns 404
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49731/[39m

 [32m‚úì[39m src/browser/server.covers-additional-endpoint-branches.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 216[2mms[22m[39m
[90mstdout[2m | src/browser/server.skips-default-maxchars-explicitly-set-zero.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mskips default maxChars when explicitly set to zero
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49733/[39m

[90mstdout[2m | src/browser/server.skips-default-maxchars-explicitly-set-zero.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mvalidates agent inputs (agent routes)
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49736/[39m

[90mstdout[2m | src/browser/server.skips-default-maxchars-explicitly-set-zero.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mcovers common error branches
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49739/[39m

[90mstdout[2m | src/browser/server.skips-default-maxchars-explicitly-set-zero.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mopens tabs via CDP createTarget path
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49746/[39m

 [32m‚úì[39m src/browser/server.skips-default-maxchars-explicitly-set-zero.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 198[2mms[22m[39m
 [32m‚úì[39m src/infra/gateway-lock.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 394[2mms[22m[39m
[90mstderr[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2mshrinks oversized images to <=5MB
[22m[39m[33m[agents/tool-images][39m [33mImage exceeds limits; resizing[39m

 [32m‚úì[39m src/browser/pw-tools-core.last-file-chooser-arm-wins.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 283[2mms[22m[39m
 [32m‚úì[39m src/cli/gateway.sigterm.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 226[2mms[22m[39m
 [32m‚úì[39m src/agents/models-config.skips-writing-models-json-no-env-token.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 324[2mms[22m[39m
[90mstdout[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2mshrinks oversized images to <=5MB
[22m[39m[33m[agents/tool-images][39m [36mImage resized[39m

[90mstderr[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2msanitizes image arrays and reports drops
[22m[39m[33m[agents/tool-images][39m [33mImage exceeds limits; resizing[39m

[90mstdout[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2msanitizes image arrays and reports drops
[22m[39m[33m[agents/tool-images][39m [36mImage resized[39m

[90mstderr[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2mshrinks images that exceed max dimension even if size is small
[22m[39m[33m[agents/tool-images][39m [33mImage exceeds limits; resizing[39m

 [32m‚úì[39m src/auto-reply/skill-commands.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 353[2mms[22m[39m
     [33m[2m‚úì[22m[39m merges command names across agents and de-duplicates [33m 349[2mms[22m[39m
[90mstdout[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2mshrinks images that exceed max dimension even if size is small
[22m[39m[33m[agents/tool-images][39m [36mImage resized[39m

 [32m‚úì[39m src/agents/tool-images.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 301[2mms[22m[39m
 [32m‚úì[39m src/browser/pw-tools-core.clamps-timeoutms-scrollintoview.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 277[2mms[22m[39m
 [32m‚úì[39m src/browser/pw-tools-core.waits-next-download-saves-it.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 303[2mms[22m[39m
 [32m‚úì[39m src/config/config.compaction-settings.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 252[2mms[22m[39m
 [32m‚úì[39m src/cli/update-cli.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 228[2mms[22m[39m
 [32m‚úì[39m src/tui/theme/theme.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 331[2mms[22m[39m
 [32m‚úì[39m src/config/config.broadcast.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 273[2mms[22m[39m
 [32m‚úì[39m src/browser/chrome.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 56[2mms[22m[39m
 [32m‚úì[39m src/config/config.talk-api-key-fallback.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 202[2mms[22m[39m
 [32m‚úì[39m src/cli/program/register.subclis.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 212[2mms[22m[39m
[90mstdout[2m | src/browser/server.agent-contract-form-layout-act-commands.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2magent contract: form + layout act commands
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49749/[39m

[90mstdout[2m | src/browser/server.agent-contract-form-layout-act-commands.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mblocks act:evaluate when browser.evaluateEnabled=false
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49752/[39m

[90mstdout[2m | src/browser/server.agent-contract-form-layout-act-commands.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2magent contract: hooks + response + downloads + screenshot
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49755/[39m

[90mstdout[2m | src/browser/server.agent-contract-form-layout-act-commands.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2magent contract: stop endpoint
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49758/[39m

 [32m‚úì[39m src/browser/server.agent-contract-form-layout-act-commands.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 190[2mms[22m[39m
 [32m‚úì[39m src/config/config.preservation-on-validation-failure.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 207[2mms[22m[39m
 [32m‚úì[39m src/agents/models-config.auto-injects-github-copilot-provider-token-is.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 226[2mms[22m[39m
 [32m‚úì[39m src/agents/models-config.uses-first-github-copilot-profile-env-tokens.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 233[2mms[22m[39m
 [32m‚úì[39m src/config/config.multi-agent-agentdir-validation.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 191[2mms[22m[39m
 [32m‚úì[39m src/agents/skills.build-workspace-skills-prompt.returns-empty-prompt-skills-dirs-are-missing.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 219[2mms[22m[39m
 [32m‚úì[39m src/agents/skills.applyskillenvoverrides.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 258[2mms[22m[39m
 [32m‚úì[39m src/agents/models-config.fills-missing-provider-apikey-from-env-var.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 212[2mms[22m[39m
 [32m‚úì[39m src/agents/skills.buildworkspaceskillcommands.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 251[2mms[22m[39m
 [32m‚úì[39m src/config/config.msteams.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 186[2mms[22m[39m
 [32m‚úì[39m src/agents/models-config.falls-back-default-baseurl-token-exchange-fails.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 187[2mms[22m[39m
 [32m‚úì[39m src/web/logout.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 229[2mms[22m[39m
 [32m‚úì[39m src/cli/cron-cli.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 206[2mms[22m[39m
 [32m‚úì[39m src/config/sessions.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 215[2mms[22m[39m
[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mPOST /tabs/open?profile=unknown returns 404
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49761/[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mPOST /profiles/create returns 400 for missing name
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49763/[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mPOST /profiles/create returns 400 for invalid name format
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49765/[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mPOST /profiles/create returns 409 for duplicate name
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49767/[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mPOST /profiles/create accepts cdpUrl for remote profiles
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49769/[39m

 [32m‚úì[39m src/auto-reply/status.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 119[2mms[22m[39m
[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mPOST /profiles/create returns 400 for invalid cdpUrl
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49771/[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mDELETE /profiles/:name returns 404 for non-existent profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49773/[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mDELETE /profiles/:name returns 400 for default profile deletion
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49775/[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mDELETE /profiles/:name returns 400 for invalid name format
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49777/[39m

 [32m‚úì[39m src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 197[2mms[22m[39m
 [32m‚úì[39m src/config/config.talk-voicealiases.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 186[2mms[22m[39m
 [32m‚úì[39m src/cli/exec-approvals-cli.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 213[2mms[22m[39m
 [32m‚úì[39m src/line/bot-handlers.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 185[2mms[22m[39m
 [32m‚úì[39m src/config/config.sandbox-docker.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 196[2mms[22m[39m
 [32m‚úì[39m src/config/config.gateway-remote-transport.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 186[2mms[22m[39m
[90mstdout[2m | src/browser/server.agent-contract-snapshot-endpoints.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2magent contract: snapshot endpoints
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49779/[39m

[90mstdout[2m | src/browser/server.agent-contract-snapshot-endpoints.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2magent contract: navigation + common act commands
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:49782/[39m

 [32m‚úì[39m src/browser/server.agent-contract-snapshot-endpoints.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 174[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/web-tools.readability.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 154[2mms[22m[39m
 [32m‚úì[39m src/cli/logs-cli.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 152[2mms[22m[39m
 [32m‚úì[39m src/imessage/send.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 123[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/actions/discord.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 125[2mms[22m[39m
 [32m‚úì[39m src/config/config.discord.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 98[2mms[22m[39m
 [32m‚úì[39m src/media/server.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 126[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/image-tool.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 137[2mms[22m[39m
 [32m‚úì[39m src/config/config.agent-concurrency-defaults.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 131[2mms[22m[39m
 [32m‚úì[39m src/process/command-queue.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 96[2mms[22m[39m
 [32m‚úì[39m src/signal/send-reactions.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 99[2mms[22m[39m
 [32m‚úì[39m src/agents/models-config.normalizes-gemini-3-ids-preview-google-providers.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 92[2mms[22m[39m
 [32m‚úì[39m src/memory/manager.atomic-reindex.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 101[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/web-tools.fetch.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 98[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/session.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [32m‚úì[39m src/cli/nodes-cli.coverage.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 95[2mms[22m[39m
[90mstderr[2m | src/memory/manager.sync-errors-do-not-crash.test.ts[2m > [22m[2mmemory manager sync failures[2m > [22m[2mdoes not raise unhandledRejection when watch-triggered sync fails
[22m[39m[31m[memory][39m [33msync failed (watch): Error: openai embeddings failed: 400 bad request[39m

 [32m‚úì[39m src/memory/manager.sync-errors-do-not-crash.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 72[2mms[22m[39m
 [32m‚úì[39m src/browser/extension-relay.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 55[2mms[22m[39m
 [32m‚úì[39m src/hooks/install.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 82[2mms[22m[39m
 [32m‚úì[39m src/discord/send.creates-thread.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 72[2mms[22m[39m
 [32m‚úì[39m src/media/store.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32m‚úì[39m src/config/config.backup-rotation.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 54[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-runner.sanitize-session-history.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [32m‚úì[39m src/memory/manager.vector-dedupe.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 58[2mms[22m[39m
 [32m‚úì[39m src/agents/model-auth.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 68[2mms[22m[39m
 [32m‚úì[39m src/line/bot-message-context.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 82[2mms[22m[39m
[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould load a handler from a module
[22m[39mRegistered hook (legacy): command:new -> C:\WINDOWS\TEMP\openclaw-test-1770299883461\test-handler.js

[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould load multiple handlers
[22m[39mRegistered hook (legacy): command:new -> C:\WINDOWS\TEMP\openclaw-test-1770299883468\handler1.js

[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould load multiple handlers
[22m[39mRegistered hook (legacy): command:stop -> C:\WINDOWS\TEMP\openclaw-test-1770299883468\handler2.js

[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould support named exports
[22m[39mRegistered hook (legacy): command:new -> C:\WINDOWS\TEMP\openclaw-test-1770299883474\named-export.js#myHandler

[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould handle relative paths
[22m[39mRegistered hook (legacy): command:new -> C:\WINDOWS\TEMP\openclaw-test-1770299883484\relative-handler.js

[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould actually call the loaded handler
[22m[39mRegistered hook (legacy): command:new -> C:\WINDOWS\TEMP\openclaw-test-1770299883487\callable-handler.js

 [32m‚úì[39m src/hooks/loader.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32m‚úì[39m src/infra/exec-approvals.test.ts [2m([22m[2m38 tests[22m[2m)[22m[32m 75[2mms[22m[39m
 [32m‚úì[39m src/commands/gateway-status.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 50[2mms[22m[39m
 [32m‚úì[39m src/agents/openclaw-tools.subagents.sessions-spawn-normalizes-allowlisted-agent-ids.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [32m‚úì[39m src/commands/doctor-state-migrations.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 65[2mms[22m[39m
 [32m‚úì[39m src/memory/manager.async-search.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 66[2mms[22m[39m
 [32m‚úì[39m src/cron/service.runs-one-shot-main-job-disables-it.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32m‚úì[39m src/config/io.compat.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 43[2mms[22m[39m
 [32m‚úì[39m src/web/inbound.media.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 54[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/reply-routing.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 44[2mms[22m[39m
[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends message via active listener
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends message via active listener
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (15ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps audio to PTT with opus mime when ogg
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net (media)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps audio to PTT with opus mime when ogg
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (media) (3ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps video with caption
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net (media)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps video with caption
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (media) (3ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmarks gif playback for video when requested
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net (media)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmarks gif playback for video when requested
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (media) (3ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps image with caption
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net (media)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps image with caption
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (media) (2ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps other kinds to document with filename
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net (media)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps other kinds to document with filename
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (media) (2ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends polls via active listener
[22m[39m[35m[whatsapp][39m [36mSending poll -> 1555@s.whatsapp.net: "Lunch?"[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends polls via active listener
[22m[39m[35m[whatsapp][39m [36mSent poll poll123 -> 1555@s.whatsapp.net (1ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends reactions via active listener
[22m[39m[35m[whatsapp][39m [36mSending reaction "‚úÖ" -> message msg123[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends reactions via active listener
[22m[39m[35m[whatsapp][39m [36mSent reaction "‚úÖ" -> message msg123[39m

 [32m‚úì[39m src/web/outbound.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 49[2mms[22m[39m
 [32m‚úì[39m src/browser/server-context.remote-tab-ops.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32m‚úì[39m src/infra/update-startup.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32m‚úì[39m src/pairing/pairing-store.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 51[2mms[22m[39m
[90mstdout[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mpasses timeoutSeconds to grammY client when configured
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mfalls back to plain text when Telegram rejects HTML
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 9[39m

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mfalls back to plain text when Telegram rejects HTML
[22m[39mtelegram HTML parse failed, retrying as plain text: 400: Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 9

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mkeeps link_preview_options on plain-text fallback when disabled
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 9[39m

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mwraps chat-not-found with actionable context
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: chat not found[39m

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mwraps chat-not-found with actionable context
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: chat not found[39m

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mdoes not retry on non-transient errors
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request[39m

 [32m‚úì[39m src/telegram/send.returns-undefined-empty-input.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 49[2mms[22m[39m
[90mstdout[2m | src/agents/cli-credentials.test.ts[2m > [22m[2mcli credentials[2m > [22m[2mupdates the Claude Code keychain item in place
[22m[39m[33m[agents/auth-profiles][39m [36mwrote refreshed credentials to claude cli keychain[39m

[90mstdout[2m | src/agents/cli-credentials.test.ts[2m > [22m[2mcli credentials[2m > [22m[2mfalls back to the file store when the keychain update fails
[22m[39m[33m[agents/auth-profiles][39m [36mwrote refreshed credentials to claude cli file[39m

[90mstdout[2m | src/agents/cli-credentials.test.ts[2m > [22m[2mcli credentials[2m > [22m[2mcaches Claude Code CLI credentials within the TTL window
[22m[39m[33m[agents/auth-profiles][39m [36mread anthropic credentials from claude cli keychain[39m

[90mstdout[2m | src/agents/cli-credentials.test.ts[2m > [22m[2mcli credentials[2m > [22m[2mrefreshes Claude Code CLI credentials after the TTL window
[22m[39m[33m[agents/auth-profiles][39m [36mread anthropic credentials from claude cli keychain[39m
[33m[agents/auth-profiles][39m [36mread anthropic credentials from claude cli keychain[39m

 [32m‚úì[39m src/browser/cdp.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 46[2mms[22m[39m
[90mstdout[2m | src/agents/cli-credentials.test.ts[2m > [22m[2mcli credentials[2m > [22m[2mreads Codex credentials from keychain when available
[22m[39m[33m[agents/auth-profiles][39m [36mread codex credentials from keychain[39m

 [32m‚úì[39m src/agents/cli-credentials.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 40[2mms[22m[39m
[90mstdout[2m | src/cli/memory-cli.test.ts[2m > [22m[2mmemory cli[2m > [22m[2menables verbose logging with --verbose
[22m[39mMemory Search (main)
Provider: openai (requested: openai)
Model: text-embedding-3-small
Indexed: 0/0 files ¬∑ 0 chunks
Dirty: no
Store: /tmp/memory.sqlite
Workspace: /tmp/openclaw
Vector: ready
Issues:
  memory directory missing (\tmp\openclaw\memory)


[90mstdout[2m | src/cli/memory-cli.test.ts[2m > [22m[2mmemory cli[2m > [22m[2mlogs close failure after status
[22m[39mMemory Search (main)
Provider: openai (requested: openai)
Model: text-embedding-3-small
Indexed: 1/0 files ¬∑ 1 chunks
Dirty: no
Store: /tmp/memory.sqlite
Workspace: /tmp/openclaw
Issues:
  memory directory missing (\tmp\openclaw\memory)


[90mstdout[2m | src/cli/memory-cli.test.ts[2m > [22m[2mmemory cli[2m > [22m[2mlogs close failures without failing the command
[22m[39mMemory index updated (main).

[90mstdout[2m | src/cli/memory-cli.test.ts[2m > [22m[2mmemory cli[2m > [22m[2mlogs close failure after search
[22m[39m0.500 memory/2026-01-12.md:1-2
Hello

 [32m‚úì[39m src/cli/memory-cli.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 31[2mms[22m[39m
 [32m‚úì[39m src/browser/pw-ai.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32m‚úì[39m src/agents/openclaw-tools.sessions.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32m‚úì[39m src/agents/openclaw-tools.subagents.sessions-spawn-resolves-main-announce-target-from.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32m‚úì[39m src/discord/send.sends-basic-channel-messages.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-tools.create-openclaw-coding-tools.adds-claude-style-aliases-schemas-without-dropping-f.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 26[2mms[22m[39m
[90mstdout[2m | src/telegram/fetch.test.ts[2m > [22m[2mresolveTelegramFetch[2m > [22m[2mreturns wrapped global fetch when available
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstdout[2m | src/telegram/fetch.test.ts[2m > [22m[2mresolveTelegramFetch[2m > [22m[2mprefers proxy fetch when provided
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstdout[2m | src/telegram/fetch.test.ts[2m > [22m[2mresolveTelegramFetch[2m > [22m[2mhonors env enable override
[22m[39m[34m[telegram][39m [36mautoSelectFamily=true (env:OPENCLAW_TELEGRAM_ENABLE_AUTO_SELECT_FAMILY)[39m

[90mstdout[2m | src/telegram/fetch.test.ts[2m > [22m[2mresolveTelegramFetch[2m > [22m[2muses config override when provided
[22m[39m[34m[telegram][39m [36mautoSelectFamily=true (config)[39m

[90mstdout[2m | src/telegram/fetch.test.ts[2m > [22m[2mresolveTelegramFetch[2m > [22m[2menv disable override wins over config
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (env:OPENCLAW_TELEGRAM_DISABLE_AUTO_SELECT_FAMILY)[39m

 [32m‚úì[39m src/telegram/fetch.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [32m‚úì[39m src/config/schema.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32m‚úì[39m src/slack/monitor/media.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32m‚úì[39m src/commands/auth-choice.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32m‚úì[39m src/agents/skills.loadworkspaceskillentries.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 45[2mms[22m[39m
 [32m‚úì[39m src/infra/provider-usage.fetch.antigravity.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32m‚úì[39m src/agents/openclaw-tools.subagents.sessions-spawn-announces-agent-wait-lifecycle-events.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 23[2mms[22m[39m
 [32m‚úì[39m src/cli/browser-cli-extension.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-tools.create-openclaw-coding-tools.adds-claude-style-aliases-schemas-without-dropping-d.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 36[2mms[22m[39m
[90mstdout[2m | src/agents/auth-profiles/oauth.fallback-to-main-agent.test.ts[2m > [22m[2mresolveApiKeyForProfile fallback to main agent[2m > [22m[2mfalls back to main agent credentials when secondary agent token is expired and refresh fails
[22m[39m[33m[agents/auth-profiles][39m [36minherited fresh OAuth credentials from main agent[39m

 [32m‚úì[39m src/agents/auth-profiles/oauth.fallback-to-main-agent.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32m‚úì[39m src/hooks/soul-evil.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 26[2mms[22m[39m
[90mstdout[2m | src/telegram/webhook.test.ts[2m > [22m[2mstartTelegramWebhook[2m > [22m[2mstarts server, registers webhook, and serves health
[22m[39mwebhook listening on http://localhost:0/telegram-webhook

[90mstdout[2m | src/telegram/webhook.test.ts[2m > [22m[2mstartTelegramWebhook[2m > [22m[2minvokes webhook handler on matching path
[22m[39mwebhook listening on http://localhost:0/hook

 [32m‚úì[39m src/telegram/webhook.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32m‚úì[39m src/infra/retry.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32m‚úì[39m src/web/monitor-inbox.streams-inbound-messages.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 29[2mms[22m[39m
[90mstdout[2m | src/telegram/send.caption-split.test.ts[2m > [22m[2msendMessageTelegram caption splitting[2m > [22m[2msplits long captions into media + text messages when text exceeds 1024 chars
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstderr[2m | src/telegram/send.caption-split.test.ts[2m > [22m[2msendMessageTelegram caption splitting[2m > [22m[2mwraps chat-not-found errors from follow-up message
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: chat not found[39m

 [32m‚úì[39m src/telegram/send.caption-split.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32m‚úì[39m src/commands/chutes-oauth.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.memory-flush.runreplyagent-memory-flush.skips-memory-flush-cli-providers.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 26[2mms[22m[39m
 [32m‚úì[39m src/infra/update-runner.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32m‚úì[39m src/memory/embeddings.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/session-resets.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [32m‚úì[39m src/infra/session-cost-usage.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32m‚úì[39m src/web/monitor-inbox.blocks-messages-from-unauthorized-senders-not-allowfrom.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32m‚úì[39m src/config/config.identity-avatar.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32m‚úì[39m src/memory/internal.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32m‚úì[39m src/agents/skills.buildworkspaceskillsnapshot.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.messaging-tools.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32m‚úì[39m src/media/store.redirect.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 27[2mms[22m[39m
 [32m‚úì[39m src/web/monitor-inbox.captures-media-path-image-messages.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32m‚úì[39m src/web/monitor-inbox.allows-messages-from-senders-allowfrom-list.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 24[2mms[22m[39m
[90mstdout[2m | src/telegram/send.preserves-thread-params-plain-text-fallback.test.ts[2m > [22m[2mbuildInlineKeyboard[2m > [22m[2mpreserves thread params in plain text fallback
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstderr[2m | src/telegram/send.preserves-thread-params-plain-text-fallback.test.ts[2m > [22m[2mbuildInlineKeyboard[2m > [22m[2mpreserves thread params in plain text fallback
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: can't parse entities: Can't find end of the entity[39m

 [32m‚úì[39m src/telegram/send.preserves-thread-params-plain-text-fallback.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 29[2mms[22m[39m
[90mstderr[2m | src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.retries-after-compaction-failure-by-resetting-session.test.ts[2m > [22m[2mrunReplyAgent typing (heartbeat)[2m > [22m[2mretries after compaction failure by resetting the session
[22m[39mAuto-compaction failed (Context overflow: Summarization failed: 400 {"message":"prompt is too long"}). Restarting session main -> ddd3bef6-3a9f-49ea-bb17-120b1e80a6a6 and retrying.

[90mstderr[2m | src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.retries-after-compaction-failure-by-resetting-session.test.ts[2m > [22m[2mrunReplyAgent typing (heartbeat)[2m > [22m[2mretries after context overflow payload by resetting the session
[22m[39mAuto-compaction failed (Context overflow: Summarization failed: 400 {"message":"prompt is too long"}). Restarting session main -> 64af3fbf-c7a1-472c-948e-8e369efede46 and retrying.

[90mstderr[2m | src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.retries-after-compaction-failure-by-resetting-session.test.ts[2m > [22m[2mrunReplyAgent typing (heartbeat)[2m > [22m[2mresets the session after role ordering payloads
[22m[39mRole ordering conflict (messages: roles must alternate between "user" and "assistant"). Restarting session main -> 795cac5f-e52a-4cac-b5b6-56182027cf86.

 [32m‚úì[39m src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.retries-after-compaction-failure-by-resetting-session.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m src/commands/onboard-auth.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/abort.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32m‚úì[39m src/telegram/sticker-cache.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 27[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/catalog.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32m‚úì[39m src/plugins/isolation.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32m‚úì[39m src/plugins/discovery.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32m‚úì[39m src/infra/bonjour.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32m‚úì[39m src/cron/run-log.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32m‚úì[39m src/markdown/ir.table-bullets.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.waits-multiple-compaction-retries-before-resolving.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32m‚úì[39m src/infra/archive.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32m‚úì[39m src/cron/service.skips-main-jobs-empty-systemevent-text.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m src/telegram/bot/delivery.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.memory-flush.runreplyagent-memory-flush.uses-configured-prompts-memory-flush-runs.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90m‚îÇ[39m
[32m‚óá[39m  [0mConfig[0m [90m‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ[39m
[90m‚îÇ[39m                                                            [90m‚îÇ[39m
[90m‚îÇ[39m  [2mConfig invalid; doctor will run with best-effort config.[22m  [90m‚îÇ[39m
[90m‚îÇ[39m                                                            [90m‚îÇ[39m
[90m‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ[39m
[90m‚îÇ[39m
[32m‚óá[39m  [0mConfig[0m [90m‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ[39m
[90m‚îÇ[39m                                                            [90m‚îÇ[39m
[90m‚îÇ[39m  [2mConfig invalid; doctor will run with best-effort config.[22m  [90m‚îÇ[39m
[90m‚îÇ[39m                                                            [90m‚îÇ[39m
[90m‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ[39m
[90m‚îÇ[39m
[32m‚óá[39m  [0mDoctor changes[0m [90m‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ[39m
[90m‚îÇ[39m                        [90m‚îÇ[39m
[90m‚îÇ[39m  [2m- gateway.auth.extra[22m  [90m‚îÇ[39m
[90m‚îÇ[39m  [2m- bridge[22m              [90m‚îÇ[39m
[90m‚îÇ[39m                        [90m‚îÇ[39m
[90m‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ[39m
 [32m‚úì[39m src/commands/doctor-config-flow.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32m‚úì[39m src/infra/provider-usage.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 18[2mms[22m[39m
[90mstdout[2m | src/telegram/send.edit-message.test.ts[2m > [22m[2meditMessageTelegram[2m > [22m[2mkeeps existing buttons when buttons is undefined (no reply_markup)
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstderr[2m | src/telegram/send.edit-message.test.ts[2m > [22m[2meditMessageTelegram[2m > [22m[2mfalls back to plain text when Telegram HTML parse fails (and preserves reply_markup)
[22m[39m[34m[telegram][39m [31meditMessage failed: 400: Bad Request: can't parse entities[39m

 [32m‚úì[39m src/telegram/send.edit-message.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32m‚úì[39m src/agents/model-fallback.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/inbound.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32m‚úì[39m src/daemon/schtasks.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32m‚úì[39m src/hooks/internal-hooks.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 31[2mms[22m[39m
[90mstdout[2m | src/logger.test.ts[2m > [22m[2mlogger helpers[2m > [22m[2monly logs debug when verbose is enabled
[22m[39mloud

[90mstdout[2m | src/logger.test.ts[2m > [22m[2mlogger helpers[2m > [22m[2mwrites to configured log file at configured level
[22m[39mhello

[90mstdout[2m | src/logger.test.ts[2m > [22m[2mlogger helpers[2m > [22m[2mfilters messages below configured level
[22m[39minfo-only
warn-only

[90mstdout[2m | src/logger.test.ts[2m > [22m[2mlogger helpers[2m > [22m[2muses daily rolling default log file and prunes old ones
[22m[39mroll-me

 [32m‚úì[39m src/logger.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32m‚úì[39m src/slack/format.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32m‚úì[39m src/config/sessions.cache.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/envelope.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.suppresses-message-end-block-replies-message-tool.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32m‚úì[39m src/infra/outbound/deliver.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32m‚úì[39m src/cli/pairing-cli.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32m‚úì[39m src/agents/skills.build-workspace-skills-prompt.applies-bundled-allowlist-without-affecting-workspace-skills.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 22[2mms[22m[39m
[90m‚îÇ[39m
[32m‚óá[39m  [0mAuth profiles[0m [90m‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ[39m
[90m‚îÇ[39m                                                                         [90m‚îÇ[39m
[90m‚îÇ[39m  [2mDeprecated external CLI auth profiles detected (no longer supported):[22m  [90m‚îÇ[39m
[90m‚îÇ[39m  [2m- anthropic:claude-cli (Anthropic): use setup-token ‚Üí openclaw models[22m  [90m‚îÇ[39m
[90m‚îÇ[39m  [2m  auth setup-token[22m                                                     [90m‚îÇ[39m
[90m‚îÇ[39m  [2m- openai-codex:codex-cli (OpenAI Codex): use OAuth ‚Üí openclaw models[22m   [90m‚îÇ[39m
[90m‚îÇ[39m  [2m  auth login --provider openai-codex[22m                                   [90m‚îÇ[39m
[90m‚îÇ[39m                                                                         [90m‚îÇ[39m
[90m‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ[39m
[90m‚îÇ[39m
[32m‚óá[39m  [0mDoctor changes[0m [90m‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ[39m
[90m‚îÇ[39m                                                [90m‚îÇ[39m
[90m‚îÇ[39m  [2m- removed anthropic:claude-cli from config[22m    [90m‚îÇ[39m
[90m‚îÇ[39m  [2m- removed openai-codex:codex-cli from config[22m  [90m‚îÇ[39m
[90m‚îÇ[39m                                                [90m‚îÇ[39m
[90m‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ[39m
 [32m‚úì[39m src/commands/doctor-auth.deprecated-cli-profiles.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/hooks/frontmatter.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32m‚úì[39m src/telegram/format.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m src/cli/browser-cli-inspect.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.memory-flush.runreplyagent-memory-flush.runs-memory-flush-turn-updates-session-metadata.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32m‚úì[39m src/cron/schedule.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/route-reply.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.signals-typing-block-replies.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32m‚úì[39m src/telegram/pairing-store.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 18[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-tools.create-openclaw-coding-tools.adds-claude-style-aliases-schemas-without-dropping.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32m‚úì[39m src/channels/ack-reactions.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32m‚úì[39m src/infra/control-ui-assets.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32m‚úì[39m src/channels/typing.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.memory-flush.runreplyagent-memory-flush.increments-compaction-count-flush-compaction-completes.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.calls-onblockreplyflush-before-tool-execution-start-preserve.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32m‚úì[39m src/cron/service.prevents-duplicate-timers.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/web-fetch.ssrf.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/telegram-actions.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 17[2mms[22m[39m
[90mstderr[2m | src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.resets-corrupted-gemini-sessions-deletes-transcripts.test.ts[2m > [22m[2mrunReplyAgent typing (heartbeat)[2m > [22m[2mresets corrupted Gemini sessions and deletes transcripts
[22m[39mSession history corrupted (Gemini function call ordering). Resetting session: main

[90mstderr[2m | src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.resets-corrupted-gemini-sessions-deletes-transcripts.test.ts[2m > [22m[2mrunReplyAgent typing (heartbeat)[2m > [22m[2mkeeps sessions intact on other errors
[22m[39mEmbedded agent failed before reply: INVALID_ARGUMENT: some other failure

[90mstderr[2m | src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.resets-corrupted-gemini-sessions-deletes-transcripts.test.ts[2m > [22m[2mrunReplyAgent typing (heartbeat)[2m > [22m[2mreturns friendly message for role ordering errors thrown as exceptions
[22m[39mEmbedded agent failed before reply: 400 Incorrect role information

[90mstderr[2m | src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.resets-corrupted-gemini-sessions-deletes-transcripts.test.ts[2m > [22m[2mrunReplyAgent typing (heartbeat)[2m > [22m[2mreturns friendly message for 'roles must alternate' errors thrown as exceptions
[22m[39mEmbedded agent failed before reply: messages: roles must alternate between "user" and "assistant"

 [32m‚úì[39m src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.resets-corrupted-gemini-sessions-deletes-transcripts.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32m‚úì[39m src/web/auto-reply/monitor/message-line.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/sessions-announce-target.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32m‚úì[39m src/utils.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/web/session.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/logging/console-capture.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32m‚úì[39m src/cli/nodes-camera.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 10[2mms[22m[39m
[90mstderr[2m | src/agents/pi-embedded-runner.google-sanitize-thinking.test.ts[2m > [22m[2msanitizeSessionHistory (google thinking)[2m > [22m[2msanitizes tool call ids for Google APIs
[22m[39m[33m[agent/embedded][39m [33mgoogle turn ordering fixup: prepended user bootstrap (sessionId=session:google)[39m

 [32m‚úì[39m src/agents/pi-embedded-runner.google-sanitize-thinking.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.includes-canvas-action-metadata-tool-summaries.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/followup-runner.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 17[2mms[22m[39m
[90mstdout[2m | src/agents/openclaw-gateway-tool.test.ts[2m > [22m[2mgateway tool[2m > [22m[2mschedules SIGUSR1 restart
[22m[39mgateway tool: restart requested (delayMs=0, reason=none)

 [32m‚úì[39m src/agents/openclaw-gateway-tool.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32m‚úì[39m src/config/sessions/transcript.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32m‚úì[39m src/signal/format.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m src/agents/identity-avatar.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 11[2mms[22m[39m
[90mstdout[2m | src/web/login.coverage.test.ts[2m > [22m[2mloginWeb coverage[2m > [22m[2mrestarts once when WhatsApp requests code 515
[22m[39mWhatsApp asked for a restart after pairing (code 515); creds are saved. Restarting connection once‚Ä¶

[90mstdout[2m | src/web/login.coverage.test.ts[2m > [22m[2mloginWeb coverage[2m > [22m[2mrestarts once when WhatsApp requests code 515
[22m[39m‚úÖ Linked after restart; web session ready.

[90mstdout[2m | src/web/login.coverage.test.ts[2m > [22m[2mloginWeb coverage[2m > [22m[2mclears creds and throws when logged out
[22m[39mWaiting for WhatsApp connection...

[90mstderr[2m | src/web/login.coverage.test.ts[2m > [22m[2mloginWeb coverage[2m > [22m[2mclears creds and throws when logged out
[22m[39mWhatsApp reported the session is logged out. Cleared cached web session; please rerun openclaw channels login and scan the QR again.

[90mstdout[2m | src/web/login.coverage.test.ts[2m > [22m[2mloginWeb coverage[2m > [22m[2mformats and rethrows generic errors
[22m[39mWaiting for WhatsApp connection...

[90mstderr[2m | src/web/login.coverage.test.ts[2m > [22m[2mloginWeb coverage[2m > [22m[2mformats and rethrows generic errors
[22m[39mWhatsApp Web connection ended before fully opening. formatted:Error: boom

 [32m‚úì[39m src/web/login.coverage.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32m‚úì[39m src/discord/audit.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/commands/models.set.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.memory-flush.runreplyagent-memory-flush.skips-memory-flush-sandbox-workspace-is-read.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32m‚úì[39m src/discord/monitor/message-handler.process.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.subscribeembeddedpisession.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m‚úì[39m src/agents/auth-profiles.markauthprofilefailure.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m‚úì[39m src/media-understanding/runner.auto-audio.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.signals-typing-normal-runs.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32m‚úì[39m src/browser/pw-session.get-page-for-targetid.extension-fallback.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 21[2mms[22m[39m
 [32m‚úì[39m src/infra/path-env.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m‚úì[39m src/discord/api.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/chunk.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m‚úì[39m src/markdown/frontmatter.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m‚úì[39m src/infra/brew.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/agents/workspace.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstderr[2m | src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.still-replies-even-if-session-reset-fails.test.ts[2m > [22m[2mrunReplyAgent typing (heartbeat)[2m > [22m[2mstill replies even if session reset fails to persist
[22m[39mSession history corrupted (Gemini function call ordering). Resetting session: main

 [32m‚úì[39m src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.still-replies-even-if-session-reset-fails.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32m‚úì[39m src/tts/tts.test.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m‚úì[39m src/line/markdown-to-line.test.ts [2m([22m[2m38 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m src/agents/skills/refresh.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/discord-actions.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m‚úì[39m src/infra/device-pairing.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/infra/dotenv.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/config/normalize-paths.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/media/mime.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m src/agents/auth-profiles.chutes.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 15[2mms[22m[39m
 [32m‚úì[39m src/agents/apply-patch.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/agents/auth-health.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/config/plugin-auto-enable.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-runner/run/images.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/agents/openclaw-tools.subagents.sessions-spawn-applies-model-child-session.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/browser/client.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/scripts/canvas-a2ui-copy.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.reasoning-tags.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.does-not-call-onblockreplyflush-callback-is-not.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/line/flex-templates.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/tui/components/searchable-select-list.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/cron-tool.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/agents/openclaw-tools.camera.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/commands-registry.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m‚úì[39m src/providers/google-shared.preserves-parameters-type-is-missing.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/line/webhook.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/telegram/send.proxy.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.splits-long-single-line-fenced-blocks-reopen.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/line-directives.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/web-tools.enabled-defaults.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply.triggers.trigger-handling.stages-inbound-media-into-sandbox-workspace.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/commands/sandbox.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m src/plugins/voice-call.plugin.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/browser-tool.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m‚úì[39m src/infra/unhandled-rejections.fatal-detection.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.claude-cli.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/config/paths.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/slack-actions.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 12[2mms[22m[39m
[90mstderr[2m | src/telegram/monitor.test.ts[2m > [22m[2mmonitorTelegramProvider (grammY)[2m > [22m[2mretries on recoverable network errors
[22m[39mTelegram network error: timeout; retrying in 0ms.

 [32m‚úì[39m src/telegram/monitor.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/agents/skills.summarize-skill-description.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/postinstall-patcher.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/agents/system-prompt.test.ts [2m([22m[2m28 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/cron/cron-protocol-conformance.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/web/inbound.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/commands/doctor-legacy-config.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/web/qr-image.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.block-streaming.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/media/fetch.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/slack/monitor/slash.command-arg-menus.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-runner/run/payloads.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.emits-reasoning-as-separate-message-enabled.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 8[2mms[22m[39m
[90mstderr[2m | src/agents/pi-tool-definition-adapter.test.ts[2m > [22m[2mpi tool definition adapter[2m > [22m[2mwraps tool errors into a tool result
[22m[39m[tools] boom failed: nope

[90mstderr[2m | src/agents/pi-tool-definition-adapter.test.ts[2m > [22m[2mpi tool definition adapter[2m > [22m[2mnormalizes exec tool aliases in error results
[22m[39m[tools] exec failed: nope

 [32m‚úì[39m src/agents/pi-tool-definition-adapter.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/message-tool.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/web/accounts.whatsapp-auth.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/formatting.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/infra/bonjour-discovery.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/browser/profiles-service.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-utils.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/telegram/audit.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/config/slack-token-validation.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/telegram/download.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/commands/onboard-helpers.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/line/template-messages.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.streams-soft-chunks-paragraph-preference.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/browser/profiles.test.ts [2m([22m[2m28 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/agents/auth-profiles.ensureauthprofilestore.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/__tests__/calendar-rpc.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/commands/doctor-security.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/agents/openclaw-tools.subagents.sessions-spawn-allows-cross-agent-spawning-configured.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/plugins/cli.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.response-usage-footer.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/slack/monitor/context.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/infra/restart-sentinel.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/actions/signal.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/config/includes.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/agents/openclaw-tools.subagents.sessions-spawn-prefers-per-agent-subagent-model.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 9[2mms[22m[39m
[90mstderr[2m | src/commands/sessions.test.ts[2m > [22m[2msessionsCommand[2m > [22m[2mrenders a tabular view with token percentages
[22m[39m[openclaw] Model "pi:opus" specified without provider. Falling back to "anthropic/pi:opus". Please use "anthropic/pi:opus" in your config.

[90mstderr[2m | src/commands/sessions.test.ts[2m > [22m[2msessionsCommand[2m > [22m[2mshows placeholder rows when tokens are missing
[22m[39m[openclaw] Model "pi:opus" specified without provider. Falling back to "anthropic/pi:opus". Please use "anthropic/pi:opus" in your config.

 [32m‚úì[39m src/commands/sessions.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/commands/onboarding/plugin-install.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.reply-tags.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/line/rich-menu.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/browser/pw-session.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/typing.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.does-not-emit-duplicate-block-replies-text.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.reopens-fenced-blocks-splitting-inside-them.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 10[2mms[22m[39m
[90mstderr[2m | src/logging/console-settings.test.ts[2m > [22m[2mgetConsoleSettings[2m > [22m[2mdoes not recurse when loadConfig logs during resolution
[22m[39m2026-02-05T13:58:32.598Z config load failed

 [32m‚úì[39m src/channels/plugins/actions/telegram.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/logging/console-settings.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/media/store.header-ext.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/config/slack-http-config.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/cli/program.force.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/config/config.tools-alsoAllow.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/web/auto-reply/session-snapshot.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/agents/openclaw-tools.agents.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/daemon/service-env.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/infra/system-events.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner.authprofileid-fallback.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 12[2mms[22m[39m
 [32m‚úì[39m src/infra/voicewake.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.emits-block-replies-text-end-does-not.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/directory-config.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/model-scan.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/imessage/targets.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/auth-profiles/session-override.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/heartbeat.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/opencode-zen-models.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/media-understanding/runner.deepgram.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/config/config.telegram-custom-commands.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-extensions/compaction-safeguard.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-extensions/context-pruning.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.isautherrormessage.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/providers/github-copilot-token.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/commands/model-picker.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/tui/tui-event-handlers.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.filters-final-suppresses-output-without-start-tag.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/response-prefix-template.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/auth-profiles.resolve-auth-profile-order.does-not-prioritize-lastgood-round-robin-ordering.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/discord/chunk.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/infra/runtime-guard.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/commands/onboard-hooks.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/cli/profile.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/line/accounts.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/discord/monitor.gateway.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/telegram/update-offset-store.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/media-understanding/providers/openai/audio.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/commands/agent-via-gateway.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/commands/daemon-install-helpers.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/tool-call-id.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/media-understanding/providers/google/video.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/config/ui-seam-color.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.validate-turns.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/security/external-content.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/config/config.web-search-provider.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/memory-search.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.keeps-assistanttexts-final-answer-block-replies-are.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/line/probe.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/config/env-substitution.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/discord/targets.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/providers/qwen-portal-oauth.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-tools.create-openclaw-coding-tools.adds-claude-style-aliases-schemas-without-dropping-b.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/browser/config.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-runner/run.overflow-compaction.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-runner/model.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/media-understanding/providers/deepgram/audio.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/slack/http/registry.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/infra/restart.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/link-understanding/detect.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/sandbox-explain.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/cli/argv.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/config/channel-capabilities.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/telegram/bot/helpers.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/config/config.skills-entries-config.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/bedrock-discovery.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/macos/relay-smoke.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-settings.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/infra/outbound/outbound-session.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/line/auto-reply-delivery.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/browser/server-context.ensure-tab-available.prefers-last-target.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/git-hooks.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.does-not-append-text-end-content-is.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/globals.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[90mstdout[2m | src/web/login-qr.test.ts[2m > [22m[2mlogin-qr[2m > [22m[2mrestarts login once on status 515 and completes
[22m[39mWhatsApp QR received.

[90mstdout[2m | src/web/login-qr.test.ts[2m > [22m[2mlogin-qr[2m > [22m[2mrestarts login once on status 515 and completes
[22m[39mWhatsApp asked for a restart after pairing (code 515); retrying connection once‚Ä¶

[90mstdout[2m | src/web/login-qr.test.ts[2m > [22m[2mlogin-qr[2m > [22m[2mrestarts login once on status 515 and completes
[22m[39m‚úÖ Linked! WhatsApp is ready.

 [32m‚úì[39m src/web/login-qr.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/cli/wait.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/outbound/telegram.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.sanitizeuserfacingtext.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/auth-profiles.resolve-auth-profile-order.normalizes-z-ai-aliases-auth-order.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/slack/actions.read.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/commands/configure.wizard.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/__tests__/phase3-execution.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.keeps-indented-fenced-blocks-intact.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/model.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/channels/channel-config.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/chutes-oauth.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/channel-tools.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/slack/monitor/slash.policy.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.does-not-duplicate-text-end-repeats-full.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/media-understanding/resolve.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/infra/binaries.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/slack/targets.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/terminal/table.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/shared/text/reasoning-tags.test.ts [2m([22m[2m39 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/telegram/token.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/channels/mention-gating.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/memory/hybrid.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/telegram/reaction-level.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/wizard/session.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-subscribe.code-span-awareness.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/session-tool-result-guard.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/model-selection.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/line/reply-chunks.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/discord/resolve-channels.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/bootstrap-files.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/commands/channels/capabilities.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/tui/tui-formatters.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/acp/event-mapper.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/telegram/accounts.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/slack/client.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-runner.guard.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/thinking.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/plugins/config-state.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/discord/monitor/exec-approvals.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/media/host.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/docs/slash-commands-doc.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/infra/shell-env.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/tui/tui-command-handlers.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/commands/health-format.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/telegram/targets.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/workspace-templates.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.stripthoughtsignatures.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/infra/widearea-dns.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/identity-file.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/bash-process-registry.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/whatsapp-actions.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/sandbox-create-args.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/routing/resolve-route.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.formatassistanterrortext.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/telegram/sent-message-cache.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/memory-flush.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/hooks/bundled/soul-evil/handler.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/infra/unhandled-rejections.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/tui/tui-input-history.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.buildbootstrapcontextfiles.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/browser/chrome.default-browser.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/line/send.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.ismessagingtoolduplicate.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/daemon/constants.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/docs/terminal-css.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/infra/outbound/target-resolver.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/commands/dashboard.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/channels/chat-type.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/agent-scope.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/telegram/voice.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/identity.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/daemon/systemd.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/infra/outbound/agent-delivery.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/tool-display.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/web/reconnect.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/browser/pw-role-snapshot.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/daemon/program-args.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/daemon/runtime-paths.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/infra/retry-policy.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/infra/outbound/payloads.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/infra/outbound/format.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/process/spawn-utils.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/whatsapp/normalize.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/infra/update-check.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/tui/tui-local-shell.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/tui/tui.submit-handler.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/cron/normalize.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/discord/monitor/threading.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/compaction.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/web-search.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/infra/channel-activity.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/cli/nodes-screen.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/infra/exec-approval-forwarder.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/infra/agent-events.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/telegram/inline-buttons.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.messaging-duplicate.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/models-config.providers.ollama.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/infra/ssh-config.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/agent-paths.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32m‚úì[39m src/infra/dedupe.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/utils/delivery-context.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/tool-meta.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/infra/outbound/outbound-policy.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/history.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/media-understanding/runner.vision-skip.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/discord/probe.intents.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/cache-trace.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/infra/tailnet.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/channels/location.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/auth-profiles.resolve-auth-profile-order.uses-stored-profiles-no-config-exists.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/infra/heartbeat-visibility.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/commands/auth-choice-options.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/tool-policy.plugin-only-allowlist.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/providers/google-shared.ensures-function-call-comes-after-user-turn.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/gateway.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/daemon/systemd-unit.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/channels/command-gating.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/acp/session.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/sessions-list-tool.gating.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/infra/net/ssrf.pinning.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/infra/tls/fingerprint.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.sanitize-session-messages-images.removes-empty-assistant-text-blocks-but-preserves.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/commands/sandbox-formatters.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/sessions-helpers.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-tools.policy.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/slack/monitor/channel-config.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/daemon/systemd-availability.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/session-transcript-repair.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/web/inbound/access-control.pairing-history.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/infra/diagnostic-flags.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/model-selection.inherit-parent.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/slack.actions.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/daemon/service-audit.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 43[2mms[22m[39m
 [32m‚úì[39m src/telegram/network-errors.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/skills/frontmatter.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/model-catalog.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/media/parse.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/common.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/channels/targets.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/hooks/gmail.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.iscompactionfailureerror.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/daemon/paths.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/session-slug.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/bootstrap-hooks.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/cli/browser-cli.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/plugins/slots.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.iscontextoverflowerror.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/sessions/send-policy.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/normalize/imessage.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/infra/outbound/envelope.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/utils/usage-format.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/subagents-utils.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/memory-tool.does-not-crash-on-errors.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/node-host/runner.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/browser/routes/utils.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.islikelycontextoverflowerror.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/slack/channel-migration.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/browser/target-id.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/failover-error.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/logging/redact.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/tool-policy.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/web/auto-reply/mentions.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/media-note.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/utils/message-channel.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/signal/daemon.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/tui/commands.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/polls.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/channels/sender-identity.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/telegram/bot-message.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/infra/env.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/utils/boolean.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/config/runtime-overrides.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/slack/monitor/thread-resolution.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/tools/sessions-send-tool.gating.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/imessage/probe.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/telegram/network-config.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/logging/console-prefix.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/infra/ssh-tunnel.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/channels/conversation-label.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/commands/doctor-platform-notes.launchctl-env-overrides.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/model-compat.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.sanitizetoolcallid.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.classifyfailoverreason.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/commands/opencode-zen-model-default.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-block-chunker.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.formatrawassistanterrorforui.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/acp/session-mapper.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/telegram/draft-chunking.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/config-writes.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/normalize-reply.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/tui/tui-overlays.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/pairing/pairing-messages.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/signal/probe.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/telegram/proxy.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/skills.resolveskillspromptforrun.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.image-size-error.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/infra/node-shell.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/commands/openai-codex-model-default.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/commands/configure.gateway.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/usage.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.downgradeopenai-reasoning.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/slack/threading-tool-context.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/shell-utils.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pty-dsr.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/logging/parse-log-line.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/commands/google-gemini-model-default.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/cli/prompt.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/infra/fetch.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/discord/gateway-logging.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/discord/token.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/slack/threading.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/signal/monitor.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.resolvebootstrapmaxchars.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/channels/registry.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/line/signature.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/wizard/onboarding.gateway-config.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.normalizetextforcomparison.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.sanitize-session-messages-images.keeps-tool-call-tool-result-ids-unchanged.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/auth-profiles.resolve-auth-profile-order.orders-by-lastused-no-explicit-order-exists.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/cli/progress.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/infra/system-presence.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.iscloudcodeassistformaterror.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/bash-tools.exec.path.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-runner.resolvesessionagentids.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/mentions.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/config/config-paths.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/infra/state-migrations.fs.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m
 [32m‚úì[39m src/cli/parse-duration.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/telegram/bot/helpers.expand-text-links.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/terminal/stream-writer.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.sanitizesessionmessagesimages-thought-signature-stripping.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/config/model-alias-defaults.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/config/sessions/metadata.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/telegram/group-migration.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/tui/tui-stream-assembler.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/sandbox/tool-policy.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/auto-reply/reply/agent-runner-utils.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/infra/is-main.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/media-understanding/scope.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/discord/monitor/presence-cache.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.isbillingerrormessage.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.image-dimension-error.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/load.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/infra/diagnostic-events.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/config/commands.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/auth-profiles.auth-profile-cooldowns.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/agents/pty-keys.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/tui/tui.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/media-understanding/format.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/cli/nodes-canvas.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/normalize/signal.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-runner/google.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/slack/resolve-channels.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/agents/pi-embedded-helpers.isfailovererrormessage.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/agents/context-window-guard.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/channels/plugins/index.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/commands/doctor-workspace.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/tui/tui-waiting.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/infra/shell-env.path.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/browser/cdp.helpers.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/hooks/gmail-watcher.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [2m[90m‚Üì[39m[22m src/infra/ports-inspect.test.ts [2m([22m[2m1 test[22m[2m | [22m[33m1 skipped[39m[2m)[22m
 [32m‚úì[39m src/agents/pi-embedded-helpers.sanitizegoogleturnordering.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 2[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Suites 98 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m src/channel-web.barrel.test.ts[2m [ src/channel-web.barrel.test.ts ][22m
[41m[1m FAIL [22m[49m src/index.test.ts[2m [ src/index.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/command-control.test.ts[2m [ src/auto-reply/command-control.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply.block-streaming.test.ts[2m [ src/auto-reply/reply.block-streaming.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply.directive.parse.test.ts[2m [ src/auto-reply/reply.directive.parse.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply.heartbeat-typing.test.ts[2m [ src/auto-reply/reply.heartbeat-typing.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply.media-note.test.ts[2m [ src/auto-reply/reply.media-note.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply.queue.test.ts[2m [ src/auto-reply/reply.queue.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply.raw-body.test.ts[2m [ src/auto-reply/reply.raw-body.test.ts ][22m
[41m[1m FAIL [22m[49m src/cli/dns-cli.test.ts[2m [ src/cli/dns-cli.test.ts ][22m
[41m[1m FAIL [22m[49m src/cli/hooks-cli.test.ts[2m [ src/cli/hooks-cli.test.ts ][22m
[41m[1m FAIL [22m[49m src/cli/program.nodes-basic.test.ts[2m [ src/cli/program.nodes-basic.test.ts ][22m
[41m[1m FAIL [22m[49m src/cli/program.nodes-media.test.ts[2m [ src/cli/program.nodes-media.test.ts ][22m
[41m[1m FAIL [22m[49m src/cli/program.smoke.test.ts[2m [ src/cli/program.smoke.test.ts ][22m
[41m[1m FAIL [22m[49m src/cli/run-main.test.ts[2m [ src/cli/run-main.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/agent.test.ts[2m [ src/commands/agent.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/agents.add.test.ts[2m [ src/commands/agents.add.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/agents.identity.test.ts[2m [ src/commands/agents.identity.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/agents.test.ts[2m [ src/commands/agents.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/channels.adds-non-default-telegram-account.test.ts[2m [ src/commands/channels.adds-non-default-telegram-account.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/channels.surfaces-signal-runtime-errors-channels-status-output.test.ts[2m [ src/commands/channels.surfaces-signal-runtime-errors-channels-status-output.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/configure.gateway-auth.test.ts[2m [ src/commands/configure.gateway-auth.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/health.command.coverage.test.ts[2m [ src/commands/health.command.coverage.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/health.snapshot.test.ts[2m [ src/commands/health.snapshot.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/health.test.ts[2m [ src/commands/health.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/onboard-channels.test.ts[2m [ src/commands/onboard-channels.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/status.test.ts[2m [ src/commands/status.test.ts ][22m
[41m[1m FAIL [22m[49m src/cron/isolated-agent.skips-delivery-without-whatsapp-recipient-besteffortdeliver-true.test.ts[2m [ src/cron/isolated-agent.skips-delivery-without-whatsapp-recipient-besteffortdeliver-true.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-runner-extraparams.test.ts[2m [ src/agents/pi-embedded-runner-extraparams.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-runner.applygoogleturnorderingfix.test.ts[2m [ src/agents/pi-embedded-runner.applygoogleturnorderingfix.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-runner.buildembeddedsandboxinfo.test.ts[2m [ src/agents/pi-embedded-runner.buildembeddedsandboxinfo.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-runner.createsystempromptoverride.test.ts[2m [ src/agents/pi-embedded-runner.createsystempromptoverride.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-runner.get-dm-history-limit-from-session-key.falls-back-provider-default-per-dm-not.test.ts[2m [ src/agents/pi-embedded-runner.get-dm-history-limit-from-session-key.falls-back-provider-default-per-dm-not.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-runner.get-dm-history-limit-from-session-key.returns-undefined-sessionkey-is-undefined.test.ts[2m [ src/agents/pi-embedded-runner.get-dm-history-limit-from-session-key.returns-undefined-sessionkey-is-undefined.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-runner.limithistoryturns.test.ts[2m [ src/agents/pi-embedded-runner.limithistoryturns.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m [ src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-runner.splitsdktools.test.ts[2m [ src/agents/pi-embedded-runner.splitsdktools.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-subscribe.tools.test.ts[2m [ src/agents/pi-embedded-subscribe.tools.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-tools.safe-bins.test.ts[2m [ src/agents/pi-tools.safe-bins.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-tools.workspace-paths.test.ts[2m [ src/agents/pi-tools.workspace-paths.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/session-tool-result-guard.tool-result-persist-hook.test.ts[2m [ src/agents/session-tool-result-guard.tool-result-persist-hook.test.ts ][22m
[41m[1m FAIL [22m[49m src/discord/monitor.test.ts[2m [ src/discord/monitor.test.ts ][22m
[41m[1m FAIL [22m[49m src/discord/monitor.tool-result.sends-status-replies-responseprefix.test.ts[2m [ src/discord/monitor.tool-result.sends-status-replies-responseprefix.test.ts ][22m
[41m[1m FAIL [22m[49m src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts[2m [ src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts ][22m
[41m[1m FAIL [22m[49m src/imessage/monitor.updates-last-route-chat-id-direct-messages.test.ts[2m [ src/imessage/monitor.updates-last-route-chat-id-direct-messages.test.ts ][22m
[41m[1m FAIL [22m[49m src/infra/heartbeat-runner.respects-ackmaxchars-heartbeat-acks.test.ts[2m [ src/infra/heartbeat-runner.respects-ackmaxchars-heartbeat-acks.test.ts ][22m
[41m[1m FAIL [22m[49m src/infra/heartbeat-runner.returns-default-unset.test.ts[2m [ src/infra/heartbeat-runner.returns-default-unset.test.ts ][22m
[41m[1m FAIL [22m[49m src/infra/heartbeat-runner.scheduler.test.ts[2m [ src/infra/heartbeat-runner.scheduler.test.ts ][22m
[41m[1m FAIL [22m[49m src/infra/heartbeat-runner.sender-prefers-delivery-target.test.ts[2m [ src/infra/heartbeat-runner.sender-prefers-delivery-target.test.ts ][22m
[41m[1m FAIL [22m[49m src/plugin-sdk/index.test.ts[2m [ src/plugin-sdk/index.test.ts ][22m
[41m[1m FAIL [22m[49m src/plugins/loader.test.ts[2m [ src/plugins/loader.test.ts ][22m
[41m[1m FAIL [22m[49m src/plugins/tools.optional.test.ts[2m [ src/plugins/tools.optional.test.ts ][22m
[41m[1m FAIL [22m[49m src/security/audit.test.ts[2m [ src/security/audit.test.ts ][22m
[41m[1m FAIL [22m[49m src/signal/monitor.tool-result.pairs-uuid-only-senders-uuid-allowlist-entry.test.ts[2m [ src/signal/monitor.tool-result.pairs-uuid-only-senders-uuid-allowlist-entry.test.ts ][22m
[41m[1m FAIL [22m[49m src/signal/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m [ src/signal/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts ][22m
[41m[1m FAIL [22m[49m src/slack/monitor.test.ts[2m [ src/slack/monitor.test.ts ][22m
[41m[1m FAIL [22m[49m src/slack/monitor.threading.missing-thread-ts.test.ts[2m [ src/slack/monitor.threading.missing-thread-ts.test.ts ][22m
[41m[1m FAIL [22m[49m src/slack/monitor.tool-result.forces-thread-replies-replytoid-is-set.test.ts[2m [ src/slack/monitor.tool-result.forces-thread-replies-replytoid-is-set.test.ts ][22m
[41m[1m FAIL [22m[49m src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m [ src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts ][22m
[41m[1m FAIL [22m[49m src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m [ src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts ][22m
[41m[1m FAIL [22m[49m src/telegram/bot-message-context.dm-threads.test.ts[2m [ src/telegram/bot-message-context.dm-threads.test.ts ][22m
[41m[1m FAIL [22m[49m src/telegram/bot-message-context.sender-prefix.test.ts[2m [ src/telegram/bot-message-context.sender-prefix.test.ts ][22m
[41m[1m FAIL [22m[49m src/telegram/bot-native-commands.plugin-auth.test.ts[2m [ src/telegram/bot-native-commands.plugin-auth.test.ts ][22m
[41m[1m FAIL [22m[49m src/telegram/bot-native-commands.test.ts[2m [ src/telegram/bot-native-commands.test.ts ][22m
[41m[1m FAIL [22m[49m src/wizard/onboarding.test.ts[2m [ src/wizard/onboarding.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m [ src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.broadcast-groups.skips-unknown-broadcast-agent-ids-agents-list.test.ts[2m [ src/web/auto-reply.broadcast-groups.skips-unknown-broadcast-agent-ids-agents-list.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.partial-reply-gating.test.ts[2m [ src/web/auto-reply.partial-reply-gating.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.typing-controller-idle.test.ts[2m [ src/web/auto-reply.typing-controller-idle.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m [ src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m [ src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m [ src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m [ src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m [ src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts[2m [ src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m [ src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m [ src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply/commands-approve.test.ts[2m [ src/auto-reply/reply/commands-approve.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply/commands-info.test.ts[2m [ src/auto-reply/reply/commands-info.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply/commands-parsing.test.ts[2m [ src/auto-reply/reply/commands-parsing.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply/commands-policy.test.ts[2m [ src/auto-reply/reply/commands-policy.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply/commands.test.ts[2m [ src/auto-reply/reply/commands.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply/directive-handling.model.test.ts[2m [ src/auto-reply/reply/directive-handling.model.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply/dispatch-from-config.test.ts[2m [ src/auto-reply/reply/dispatch-from-config.test.ts ][22m
[41m[1m FAIL [22m[49m src/auto-reply/reply/queue.collect-routing.test.ts[2m [ src/auto-reply/reply/queue.collect-routing.test.ts ][22m
[41m[1m FAIL [22m[49m src/channels/web/index.test.ts[2m [ src/channels/web/index.test.ts ][22m
[41m[1m FAIL [22m[49m src/commands/models/list.status.test.ts[2m [ src/commands/models/list.status.test.ts ][22m
[41m[1m FAIL [22m[49m src/infra/outbound/message-action-runner.test.ts[2m [ src/infra/outbound/message-action-runner.test.ts ][22m
[41m[1m FAIL [22m[49m src/infra/outbound/message-action-runner.threading.test.ts[2m [ src/infra/outbound/message-action-runner.threading.test.ts ][22m
[41m[1m FAIL [22m[49m src/infra/outbound/targets.test.ts[2m [ src/infra/outbound/targets.test.ts ][22m
[41m[1m FAIL [22m[49m src/signal/monitor/event-handler.inbound-contract.test.ts[2m [ src/signal/monitor/event-handler.inbound-contract.test.ts ][22m
[41m[1m FAIL [22m[49m src/agents/pi-embedded-runner/run/attempt.test.ts[2m [ src/agents/pi-embedded-runner/run/attempt.test.ts ][22m
[41m[1m FAIL [22m[49m src/slack/monitor/message-handler/prepare.inbound-contract.test.ts[2m [ src/slack/monitor/message-handler/prepare.inbound-contract.test.ts ][22m
[41m[1m FAIL [22m[49m src/slack/monitor/message-handler/prepare.sender-prefix.test.ts[2m [ src/slack/monitor/message-handler/prepare.sender-prefix.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply/monitor/group-gating.test.ts[2m [ src/web/auto-reply/monitor/group-gating.test.ts ][22m
[41m[1m FAIL [22m[49m src/web/auto-reply/monitor/process-message.inbound-contract.test.ts[2m [ src/web/auto-reply/monitor/process-message.inbound-contract.test.ts ][22m
[31m[1mError[22m: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'[39m
[36m [2m‚ùØ[22m src/telegram/bot-handlers.ts:[2m31:1[22m[39m
    [90m 29| [39m[35mimport[39m { migrateTelegramGroupConfig } [35mfrom[39m [32m"./group-migration.js"[39m[33m;[39m
    [90m 30| [39mimport { resolveTelegramInlineButtonsScope } from "./inline-buttons.js‚Ä¶
    [90m 31| [39m[35mimport[39m {
    [90m   | [39m[31m^[39m
    [90m 32| [39m  buildModelsKeyboard[33m,[39m
    [90m 33| [39m  buildProviderKeyboard[33m,[39m
[90m [2m‚ùØ[22m src/telegram/bot.ts:[2m32:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/memory/backend-config.test.ts[2m [ src/memory/backend-config.test.ts ][22m
[31m[1mError[22m: Cannot find module '../utils/shell-argv.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/memory/backend-config.ts'[39m
[36m [2m‚ùØ[22m src/memory/backend-config.ts:[2m13:1[22m[39m
    [90m 11| [39m[35mimport[39m { parseDurationMs } [35mfrom[39m [32m"../cli/parse-duration.js"[39m[33m;[39m
    [90m 12| [39m[35mimport[39m { resolveUserPath } [35mfrom[39m [32m"../utils.js"[39m[33m;[39m
    [90m 13| [39m[35mimport[39m { splitShellArgs } [35mfrom[39m [32m"../utils/shell-argv.js"[39m[33m;[39m
    [90m   | [39m[31m^[39m
    [90m 14| [39m
    [90m 15| [39m[35mexport[39m type [33mResolvedMemoryBackendConfig[39m [33m=[39m {
[90m [2m‚ùØ[22m src/memory/backend-config.test.ts:[2m5:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/discord/monitor/message-handler.inbound-contract.test.ts[2m [ src/discord/monitor/message-handler.inbound-contract.test.ts ][22m
[31m[1mError[22m: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock[39m
[36m [2m‚ùØ[22m src/discord/monitor/message-handler.process.ts:[2m15:1[22m[39m
    [90m 13| [39m  resolveEnvelopeFormatOptions[33m,[39m
    [90m 14| [39m} [35mfrom[39m [32m"../../auto-reply/envelope.js"[39m[33m;[39m
    [90m 15| [39m[35mimport[39m { dispatchInboundMessage } [35mfrom[39m [32m"../../auto-reply/dispatch.js"[39m[33m;[39m
    [90m   | [39m[31m^[39m
    [90m 16| [39m[35mimport[39m {
    [90m 17| [39m  buildPendingHistoryContextFromMap[33m,[39m
[90m [2m‚ùØ[22m src/discord/monitor/message-handler.inbound-contract.test.ts:[2m26:1[22m[39m

[31m[1mCaused by: Error[22m: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'[39m
[36m [2m‚ùØ[22m src/telegram/bot-handlers.ts:[2m31:1[22m[39m
[90m [2m‚ùØ[22m src/telegram/bot.ts:[2m32:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ code: 'ERR_MODULE_NOT_FOUND' }[39m
[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/294]‚éØ[22m[39m


[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 196 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m src/cli/gateway-cli.coverage.test.ts[2m > [22mgateway-cli coverage[2m > [22mregisters call/health commands and routes to callGateway
[41m[1m FAIL [22m[49m src/cli/gateway-cli.coverage.test.ts[2m > [22mgateway-cli coverage[2m > [22mregisters gateway probe and routes to gatewayStatusCommand
[41m[1m FAIL [22m[49m src/cli/gateway-cli.coverage.test.ts[2m > [22mgateway-cli coverage[2m > [22mregisters gateway discover and prints JSON
[41m[1m FAIL [22m[49m src/cli/gateway-cli.coverage.test.ts[2m > [22mgateway-cli coverage[2m > [22mregisters gateway discover and prints human output with details on new lines
[41m[1m FAIL [22m[49m src/cli/gateway-cli.coverage.test.ts[2m > [22mgateway-cli coverage[2m > [22mvalidates gateway discover timeout
[41m[1m FAIL [22m[49m src/cli/gateway-cli.coverage.test.ts[2m > [22mgateway-cli coverage[2m > [22mfails gateway call on invalid params JSON
[41m[1m FAIL [22m[49m src/cli/gateway-cli.coverage.test.ts[2m > [22mgateway-cli coverage[2m > [22mvalidates gateway ports and handles force/start errors
[41m[1m FAIL [22m[49m src/cli/gateway-cli.coverage.test.ts[2m > [22mgateway-cli coverage[2m > [22mprints stop hints on GatewayLockError when service is loaded
[41m[1m FAIL [22m[49m src/cli/gateway-cli.coverage.test.ts[2m > [22mgateway-cli coverage[2m > [22muses env/config port when --port is omitted
[41m[1m FAIL [22m[49m src/commands/models.list.test.ts[2m > [22mmodels list/status[2m > [22mmodels status resolves z.ai alias to canonical zai
[41m[1m FAIL [22m[49m src/commands/models.list.test.ts[2m > [22mmodels list/status[2m > [22mmodels status plain outputs canonical zai model
[41m[1m FAIL [22m[49m src/commands/models.list.test.ts[2m > [22mmodels list/status[2m > [22mmodels list outputs canonical zai key for configured z.ai model
[41m[1m FAIL [22m[49m src/commands/models.list.test.ts[2m > [22mmodels list/status[2m > [22mmodels list plain outputs canonical zai key
[41m[1m FAIL [22m[49m src/commands/models.list.test.ts[2m > [22mmodels list/status[2m > [22mmodels list provider filter normalizes z.ai alias
[41m[1m FAIL [22m[49m src/commands/models.list.test.ts[2m > [22mmodels list/status[2m > [22mmodels list provider filter normalizes Z.AI alias casing
[41m[1m FAIL [22m[49m src/commands/models.list.test.ts[2m > [22mmodels list/status[2m > [22mmodels list provider filter normalizes z-ai alias
[41m[1m FAIL [22m[49m src/commands/models.list.test.ts[2m > [22mmodels list/status[2m > [22mmodels list marks auth as unavailable when ZAI key is missing
[41m[1m FAIL [22m[49m src/commands/onboard-non-interactive.ai-gateway.test.ts[2m > [22monboard (non-interactive): Vercel AI Gateway[2m > [22mstores the API key and configures the default model
[41m[1m FAIL [22m[49m src/commands/onboard-non-interactive.gateway.test.ts[2m > [22monboard (non-interactive): gateway and remote auth[2m > [22mwrites gateway token auth into config and gateway enforces it
[41m[1m FAIL [22m[49m src/commands/onboard-non-interactive.gateway.test.ts[2m > [22monboard (non-interactive): gateway and remote auth[2m > [22mwrites gateway.remote url/token and callGateway uses them
[41m[1m FAIL [22m[49m src/commands/onboard-non-interactive.token.test.ts[2m > [22monboard (non-interactive): token auth[2m > [22mwrites token profile config and stores the token
[41m[1m FAIL [22m[49m src/discord/monitor.slash.test.ts[2m > [22mdiscord native commands[2m > [22mskips tool results for native slash commands
[41m[1m FAIL [22m[49m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts[2m > [22mdiscord tool result dispatch[2m > [22maccepts guild messages when mentionPatterns match
[41m[1m FAIL [22m[49m src/signal/monitor.event-handler.sender-prefix.test.ts[2m > [22msignal event handler sender prefix[2m > [22mprefixes group bodies with sender label
[41m[1m FAIL [22m[49m src/signal/monitor.event-handler.typing-read-receipts.test.ts[2m > [22msignal event handler typing + read receipts[2m > [22msends typing + read receipt for allowed DMs
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts[2m > [22mcreateTelegramBot[2m > [22maccepts group messages when mentionPatterns match (without @botUsername)
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts[2m > [22mcreateTelegramBot[2m > [22maccepts group messages when mentionPatterns match even if another user is mentioned
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts[2m > [22mcreateTelegramBot[2m > [22mkeeps group envelope headers stable (sender identity is separate)
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts[2m > [22mcreateTelegramBot[2m > [22mreacts to mention-gated group messages when ackReaction is enabled
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts[2m > [22mcreateTelegramBot[2m > [22mclears native commands when disabled
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts[2m > [22mcreateTelegramBot[2m > [22mskips group messages when requireMention is enabled and no mention matches
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages when requireMention is enabled but mentions cannot be detected
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts[2m > [22mcreateTelegramBot[2m > [22mincludes reply-to context when a Telegram reply is received
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.applies-topic-skill-filters-system-prompts.test.ts[2m > [22mcreateTelegramBot[2m > [22mapplies topic skill filters and system prompts
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.applies-topic-skill-filters-system-prompts.test.ts[2m > [22mcreateTelegramBot[2m > [22mpasses message_thread_id to topic replies
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.applies-topic-skill-filters-system-prompts.test.ts[2m > [22mcreateTelegramBot[2m > [22mthreads native command replies inside topics
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.applies-topic-skill-filters-system-prompts.test.ts[2m > [22mcreateTelegramBot[2m > [22mskips tool summaries for native slash commands
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.applies-topic-skill-filters-system-prompts.test.ts[2m > [22mcreateTelegramBot[2m > [22mdedupes duplicate message updates by update_id
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.blocks-all-group-messages-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks all group messages when groupPolicy is 'disabled'
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.blocks-all-group-messages-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks group messages from senders not in allowFrom when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.blocks-all-group-messages-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages from senders in allowFrom (by ID) when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.blocks-all-group-messages-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages from senders in allowFrom (by username) when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.blocks-all-group-messages-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages from telegram:-prefixed allowFrom entries when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.blocks-all-group-messages-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages from tg:-prefixed allowFrom entries case-insensitively when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.blocks-all-group-messages-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows all group messages when groupPolicy is 'open'
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.dedupes-duplicate-callback-query-updates-by-update.test.ts[2m > [22mcreateTelegramBot[2m > [22mdedupes duplicate callback_query updates by update_id
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.dedupes-duplicate-callback-query-updates-by-update.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows distinct callback_query ids without update_id
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22mcreateTelegramBot[2m > [22minstalls grammY throttler
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22mcreateTelegramBot[2m > [22muses wrapped fetch when global fetch is available
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22mcreateTelegramBot[2m > [22mpasses timeoutSeconds even without a custom fetch
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22mcreateTelegramBot[2m > [22mprefers per-account timeoutSeconds overrides
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22mcreateTelegramBot[2m > [22msequentializes updates by chat and thread
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22mcreateTelegramBot[2m > [22mroutes callback_query payloads as messages and answers callbacks
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22mcreateTelegramBot[2m > [22mwraps inbound message with Telegram envelope
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22mcreateTelegramBot[2m > [22mrequests pairing by default for unknown DM senders
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22mcreateTelegramBot[2m > [22mdoes not resend pairing code when a request is already pending
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22mcreateTelegramBot[2m > [22mtriggers typing cue via onReplyStart
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-tg-prefixed-allowfrom-entries-case-insensitively.test.ts[2m > [22mcreateTelegramBot[2m > [22mmatches tg:-prefixed allowFrom entries case-insensitively in group allowlist
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-tg-prefixed-allowfrom-entries-case-insensitively.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks group messages when groupPolicy allowlist has no groupAllowFrom
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-tg-prefixed-allowfrom-entries-case-insensitively.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows control commands with TG-prefixed groupAllowFrom entries
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-tg-prefixed-allowfrom-entries-case-insensitively.test.ts[2m > [22mcreateTelegramBot[2m > [22misolates forum topic sessions and carries thread metadata
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-tg-prefixed-allowfrom-entries-case-insensitively.test.ts[2m > [22mcreateTelegramBot[2m > [22mfalls back to General topic thread id for typing in forums
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-tg-prefixed-allowfrom-entries-case-insensitively.test.ts[2m > [22mcreateTelegramBot[2m > [22mroutes General topic replies using thread id 1
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-usernames-case-insensitively-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mmatches usernames case-insensitively when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-usernames-case-insensitively-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows direct messages regardless of groupPolicy
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-usernames-case-insensitively-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows direct messages with tg/Telegram-prefixed allowFrom entries
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-usernames-case-insensitively-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows direct messages with telegram:-prefixed allowFrom entries
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-usernames-case-insensitively-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages with wildcard in allowFrom when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-usernames-case-insensitively-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks group messages with no sender ID when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.matches-usernames-case-insensitively-grouppolicy-is.test.ts[2m > [22mcreateTelegramBot[2m > [22mmatches telegram:-prefixed allowFrom entries in group allowlist
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.routes-dms-by-telegram-accountid-binding.test.ts[2m > [22mcreateTelegramBot[2m > [22mroutes DMs by telegram accountId binding
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.routes-dms-by-telegram-accountid-binding.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows per-group requireMention override
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.routes-dms-by-telegram-accountid-binding.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows per-topic requireMention override
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.routes-dms-by-telegram-accountid-binding.test.ts[2m > [22mcreateTelegramBot[2m > [22mhonors groups default when no explicit group override exists
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.routes-dms-by-telegram-accountid-binding.test.ts[2m > [22mcreateTelegramBot[2m > [22mdoes not block group messages when bot username is unknown
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.routes-dms-by-telegram-accountid-binding.test.ts[2m > [22mcreateTelegramBot[2m > [22msends GIF replies as animations
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.sends-replies-without-native-reply-threading.test.ts[2m > [22mcreateTelegramBot[2m > [22msends replies without native reply threading
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.sends-replies-without-native-reply-threading.test.ts[2m > [22mcreateTelegramBot[2m > [22mhonors replyToMode=first for threaded replies
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.sends-replies-without-native-reply-threading.test.ts[2m > [22mcreateTelegramBot[2m > [22mprefixes final replies with responsePrefix
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.sends-replies-without-native-reply-threading.test.ts[2m > [22mcreateTelegramBot[2m > [22mhonors replyToMode=all for threaded replies
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.sends-replies-without-native-reply-threading.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks group messages when telegram.groups is set without a wildcard
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.sends-replies-without-native-reply-threading.test.ts[2m > [22mcreateTelegramBot[2m > [22mskips group messages without mention when requireMention is enabled
[41m[1m FAIL [22m[49m src/telegram/bot.create-telegram-bot.sends-replies-without-native-reply-threading.test.ts[2m > [22mcreateTelegramBot[2m > [22mhonors routed group activation from session store
[41m[1m FAIL [22m[49m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22mtelegram inbound media[2m > [22mdownloads media via file_path (no file.download)
[41m[1m FAIL [22m[49m src/telegram/bot.media.includes-location-text-ctx-fields-pins.test.ts[2m > [22mtelegram inbound media[2m > [22mincludes location text and ctx fields for pins
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22minstalls grammY throttler
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mmerges custom commands with native commands
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mignores custom commands that collide with native commands
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mregisters custom commands when native commands are disabled
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22muses wrapped fetch when global fetch is available
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22msequentializes updates by chat and thread
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mroutes callback_query payloads as messages and answers callbacks
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks callback_query when inline buttons are allowlist-only and sender not authorized
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22medits commands list for pagination callbacks
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks pagination callbacks when allowlist rejects sender
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mwraps inbound message with Telegram envelope
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mrequests pairing by default for unknown DM senders
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mdoes not resend pairing code when a request is already pending
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mtriggers typing cue via onReplyStart
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22maccepts group messages when mentionPatterns match (without @botUsername)
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mincludes sender identity in group envelope headers
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mreacts to mention-gated group messages when ackReaction is enabled
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mclears native commands when disabled
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mskips group messages when requireMention is enabled and no mention matches
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages when requireMention is enabled but mentions cannot be detected
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mincludes reply-to context when a Telegram reply is received
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22muses quote text when a Telegram partial reply is received
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mhandles quote-only replies without reply metadata
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22msends replies without native reply threading
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mhonors replyToMode=first for threaded replies
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mprefixes final replies with responsePrefix
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mhonors replyToMode=all for threaded replies
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks group messages when telegram.groups is set without a wildcard
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mskips group messages without mention when requireMention is enabled
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22maccepts group replies to the bot without explicit mention when requireMention is enabled
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mhonors routed group activation from session store
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mroutes DMs by telegram accountId binding
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows per-group requireMention override
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows per-topic requireMention override
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22minherits group allowlist + requireMention in topics
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mprefers topic allowFrom over group allowFrom
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mhonors groups default when no explicit group override exists
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mdoes not block group messages when bot username is unknown
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22msends GIF replies as animations
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks all group messages when groupPolicy is 'disabled'
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks group messages from senders not in allowFrom when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages from senders in allowFrom (by ID) when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages from senders in allowFrom (by username) when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages from telegram:-prefixed allowFrom entries when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages from tg:-prefixed allowFrom entries case-insensitively when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows all group messages when groupPolicy is 'open'
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mmatches usernames case-insensitively when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows direct messages regardless of groupPolicy
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows direct messages with tg/Telegram-prefixed allowFrom entries
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows direct messages with telegram:-prefixed allowFrom entries
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows group messages with wildcard in allowFrom when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks group messages with no sender ID when groupPolicy is 'allowlist'
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mmatches telegram:-prefixed allowFrom entries in group allowlist
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mmatches tg:-prefixed allowFrom entries case-insensitively in group allowlist
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks group messages when groupPolicy allowlist has no groupAllowFrom
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows control commands with TG-prefixed groupAllowFrom entries
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22misolates forum topic sessions and carries thread metadata
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mfalls back to General topic thread id for typing in forums
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mroutes General topic replies using thread id 1
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mapplies topic skill filters and system prompts
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mpasses message_thread_id to topic replies
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mthreads native command replies inside topics
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22msets command target session key for dm topic commands
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows native DM commands for paired users
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mblocks native DM commands for unpaired users
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mskips tool summaries for native slash commands
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mdedupes duplicate message updates by update_id
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mdedupes duplicate callback_query updates by update_id
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows distinct callback_query ids without update_id
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mregisters message_reaction handler
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22menqueues system event for reaction
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mskips reaction when reactionNotifications is off
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mdefaults reactionNotifications to own
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows reaction in all mode regardless of message sender
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mskips reaction in own mode when message is not sent by bot
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mallows reaction in own mode when message is sent by bot
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mskips reaction from bot users
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22mskips reaction removal (only processes added reactions)
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22muses correct session key for forum group reactions with topic
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22muses correct session key for forum group reactions in general topic
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22muses correct session key for regular group reactions without topic
[41m[1m FAIL [22m[49m src/telegram/bot.test.ts[2m > [22mcreateTelegramBot[2m > [22muses thread session key for dm reactions with topic id
[31m[1mError[22m: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'[39m
[36m [2m‚ùØ[22m src/telegram/bot-handlers.ts:[2m31:1[22m[39m
    [90m 29| [39m[35mimport[39m { migrateTelegramGroupConfig } [35mfrom[39m [32m"./group-migration.js"[39m[33m;[39m
    [90m 30| [39mimport { resolveTelegramInlineButtonsScope } from "./inline-buttons.js‚Ä¶
    [90m 31| [39m[35mimport[39m {
    [90m   | [39m[31m^[39m
    [90m 32| [39m  buildModelsKeyboard[33m,[39m
    [90m 33| [39m  buildProviderKeyboard[33m,[39m
[90m [2m‚ùØ[22m src/telegram/bot.ts:[2m32:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/cli/models-cli.test.ts[2m > [22mmodels cli[2m > [22mregisters github-copilot login command
[41m[1m FAIL [22m[49m src/cli/models-cli.test.ts[2m > [22mmodels cli[2m > [22mpasses --agent to models status
[41m[1m FAIL [22m[49m src/cli/models-cli.test.ts[2m > [22mmodels cli[2m > [22mpasses parent --agent to models status
[41m[1m FAIL [22m[49m src/cli/models-cli.test.ts[2m > [22mmodels cli[2m > [22mshows help for models auth without error exit
[31m[1mError[22m: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock[39m
[36m [2m‚ùØ[22m src/cli/models-cli.ts:[2m3:1[22m[39m
    [90m  1| [39m[35mimport[39m type { [33mCommand[39m } [35mfrom[39m [32m"commander"[39m[33m;[39m
    [90m  2| [39m
    [90m  3| [39m[35mimport[39m {
    [90m   | [39m[31m^[39m
    [90m  4| [39m  githubCopilotLoginCommand[33m,[39m
    [90m  5| [39m  modelsAliasesAddCommand[33m,[39m
[90m [2m‚ùØ[22m src/cli/models-cli.test.ts:[2m25:35[22m[39m

[31m[1mCaused by: Error[22m: Cannot find module './model-buttons.js' imported from 'C:/Users/Specter/Desktop/Helix/helix-runtime/src/telegram/bot-handlers.ts'[39m
[36m [2m‚ùØ[22m src/telegram/bot-handlers.ts:[2m31:1[22m[39m
[90m [2m‚ùØ[22m src/telegram/bot.ts:[2m32:1[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ code: 'ERR_MODULE_NOT_FOUND' }[39m
[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/agents/bash-tools.test.ts[2m > [22mexec tool backgrounding[2m > [22mdoes not default to elevated when not allowed
[31m[1mAssertionError[22m: expected 'Command still running (session clear-‚Ä¶' to contain 'hi'[39m

Expected: [32m"hi"[39m
Received: [31m"Command still running (session clear-coral, pid 43096). Use process (list/poll/log/write/kill/clear/remove) for follow-up."[39m

[36m [2m‚ùØ[22m src/agents/bash-tools.test.ts:[2m203:18[22m[39m
    [90m201| [39m    })[33m;[39m
    [90m202| [39m    const text = result.content.find((c) => c.type === "text")?.text ?‚Ä¶
    [90m203| [39m    [34mexpect[39m(text)[33m.[39m[34mtoContain[39m([32m"hi"[39m)[33m;[39m
    [90m   | [39m                 [31m^[39m
    [90m204| [39m  })[33m;[39m
    [90m205| [39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts[2m > [22mdiscord tool result dispatch[2m > [22maccepts guild messages when mentionPatterns match even if another user is mentioned
[31m[1mTypeError[22m: createDiscordMessageHandler is not a function[39m
[36m [2m‚ùØ[22m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts:[2m161:21[22m[39m
    [90m159| [39m    } [35mas[39m [33mReturnType[39m[33m<[39m[35mtypeof[39m [35mimport[39m([32m"../config/config.js"[39m)[33m.[39mloadConfig[33m>[39m[33m;[39m
    [90m160| [39m
    [90m161| [39m    [35mconst[39m handler [33m=[39m [34mcreateDiscordMessageHandler[39m({
    [90m   | [39m                    [31m^[39m
    [90m162| [39m      cfg[33m,[39m
    [90m163| [39m      discordConfig[33m:[39m cfg[33m.[39mchannels[33m.[39mdiscord[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts[2m > [22mdiscord tool result dispatch[2m > [22maccepts guild reply-to-bot messages as implicit mentions
[31m[1mTypeError[22m: createDiscordMessageHandler is not a function[39m
[36m [2m‚ùØ[22m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts:[2m237:21[22m[39m
    [90m235| [39m    } [35mas[39m [33mReturnType[39m[33m<[39m[35mtypeof[39m [35mimport[39m([32m"../config/config.js"[39m)[33m.[39mloadConfig[33m>[39m[33m;[39m
    [90m236| [39m
    [90m237| [39m    [35mconst[39m handler [33m=[39m [34mcreateDiscordMessageHandler[39m({
    [90m   | [39m                    [31m^[39m
    [90m238| [39m      cfg[33m,[39m
    [90m239| [39m      discordConfig[33m:[39m cfg[33m.[39mchannels[33m.[39mdiscord[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts[2m > [22mdiscord tool result dispatch[2m > [22mforks thread sessions and injects starter context
[31m[1mTypeError[22m: createDiscordMessageHandler is not a function[39m
[36m [2m‚ùØ[22m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts:[2m352:21[22m[39m
    [90m350| [39m    } [35mas[39m [33mReturnType[39m[33m<[39m[35mtypeof[39m [35mimport[39m([32m"../config/config.js"[39m)[33m.[39mloadConfig[33m>[39m[33m;[39m
    [90m351| [39m
    [90m352| [39m    [35mconst[39m handler [33m=[39m [34mcreateDiscordMessageHandler[39m({
    [90m   | [39m                    [31m^[39m
    [90m353| [39m      cfg[33m,[39m
    [90m354| [39m      discordConfig[33m:[39m cfg[33m.[39mchannels[33m.[39mdiscord[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts[2m > [22mdiscord tool result dispatch[2m > [22mtreats forum threads as distinct sessions without channel payloads
[31m[1mTypeError[22m: createDiscordMessageHandler is not a function[39m
[36m [2m‚ùØ[22m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts:[2m461:21[22m[39m
    [90m459| [39m    } [35mas[39m [33mReturnType[39m[33m<[39m[35mtypeof[39m [35mimport[39m([32m"../config/config.js"[39m)[33m.[39mloadConfig[33m>[39m[33m;[39m
    [90m460| [39m
    [90m461| [39m    [35mconst[39m handler [33m=[39m [34mcreateDiscordMessageHandler[39m({
    [90m   | [39m                    [31m^[39m
    [90m462| [39m      cfg[33m,[39m
    [90m463| [39m      discordConfig[33m:[39m cfg[33m.[39mchannels[33m.[39mdiscord[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts[2m > [22mdiscord tool result dispatch[2m > [22mscopes thread sessions to the routed agent
[31m[1mTypeError[22m: createDiscordMessageHandler is not a function[39m
[36m [2m‚ùØ[22m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts:[2m571:21[22m[39m
    [90m569| [39m    } [35mas[39m [33mReturnType[39m[33m<[39m[35mtypeof[39m [35mimport[39m([32m"../config/config.js"[39m)[33m.[39mloadConfig[33m>[39m[33m;[39m
    [90m570| [39m
    [90m571| [39m    [35mconst[39m handler [33m=[39m [34mcreateDiscordMessageHandler[39m({
    [90m   | [39m                    [31m^[39m
    [90m572| [39m      cfg[33m,[39m
    [90m573| [39m      discordConfig[33m:[39m cfg[33m.[39mchannels[33m.[39mdiscord[33m,[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/media-understanding/attachments.ssrf.test.ts[2m > [22mmedia understanding attachments SSRF[2m > [22mblocks private IP URLs before fetching
[31m[1mAssertionError[22m: expected [Function] to throw error matching /private|internal|blocked/i but got 'Cannot read properties of undefined (‚Ä¶'[39m

[32m- Expected:[39m 
/private|internal|blocked/i

[31m+ Received:[39m 
"Cannot read properties of undefined (reading 'ok')"

[36m [2m‚ùØ[22m src/media-understanding/attachments.ssrf.test.ts:[2m18:5[22m[39m
    [90m 16| [39m    const cache = new MediaAttachmentCache([{ index: 0, url: "http://1‚Ä¶
    [90m 17| [39m
    [90m 18| [39m    [35mawait[39m [34mexpect[39m(
    [90m   | [39m    [31m^[39m
    [90m 19| [39m      cache.getBuffer({ attachmentIndex: 0, maxBytes: 1024, timeoutMs:‚Ä¶
    [90m 20| [39m    )[33m.[39mrejects[33m.[39m[34mtoThrow[39m([36m/private|internal|blocked/i[39m)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[12/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/plugins/environment-proxy.test.ts[2m > [22mPlugin Environment Proxy[2m > [22mProxy Behavior[2m > [22mis read-only (blocking sets)
[31m[1mTypeError[22m: 'set' on proxy: trap returned falsish for property 'NODE_ENV'[39m
[36m [2m‚ùØ[22m src/plugins/environment-proxy.test.ts:[2m188:36[22m[39m
    [90m186| [39m
    [90m187| [39m    [34mit[39m([32m'is read-only (blocking sets)'[39m[33m,[39m () [33m=>[39m {
    [90m188| [39m      [35mconst[39m result [33m=[39m ((env [35mas[39m any)[33m.[39m[33mNODE_ENV[39m [33m=[39m [32m'production'[39m)[33m;[39m
    [90m   | [39m                                   [31m^[39m
    [90m189| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m190| [39m      [90m// Value should not change[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[13/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/plugins/environment-proxy.test.ts[2m > [22mPlugin Environment Proxy[2m > [22mSecurity Edge Cases[2m > [22mblocks credential-like values even if not in allowlist
[31m[1mAssertionError[22m: expected 'secret123' to be undefined[39m

[32m- Expected:[39m 
undefined

[31m+ Received:[39m 
"secret123"

[36m [2m‚ùØ[22m src/plugins/environment-proxy.test.ts:[2m337:42[22m[39m
    [90m335| [39m      [35mconst[39m proxyEnv [33m=[39m [34mcreatePluginEnvironment[39m([32m'test-plugin'[39m)[33m;[39m
    [90m336| [39m
    [90m337| [39m      [34mexpect[39m(proxyEnv[33m.[39m[33mCUSTOM_CREDENTIAL[39m)[33m.[39m[34mtoBeUndefined[39m()[33m;[39m
    [90m   | [39m                                         [31m^[39m
    [90m338| [39m
    [90m339| [39m      [35mdelete[39m process[33m.[39menv[33m.[39m[33mCUSTOM_CREDENTIAL[39m[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[14/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22mtelegram inbound media[2m > [22mprefers proxyFetch over global fetch
[31m[1mReferenceError[22m: Cannot access '__vite_ssr_import_24__' before initialization[39m
[36m [2m‚ùØ[22m createTelegramBot src/telegram/bot.ts:[2m126:21[22m[39m
    [90m124| [39m  [35mconst[39m telegramCfg [33m=[39m account[33m.[39mconfig[33m;[39m
    [90m125| [39m
    [90m126| [39m  [35mconst[39m fetchImpl [33m=[39m [34mresolveTelegramFetch[39m(opts[33m.[39mproxyFetch[33m,[39m {
    [90m   | [39m                    [31m^[39m
    [90m127| [39m    network[33m:[39m telegramCfg[33m.[39mnetwork[33m,[39m
    [90m128| [39m  })[33m;[39m
[90m [2m‚ùØ[22m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts:[2m187:5[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[15/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22mtelegram inbound media[2m > [22mlogs a handler error when getFile returns no file_path
[31m[1mReferenceError[22m: Cannot access '__vite_ssr_import_24__' before initialization[39m
[36m [2m‚ùØ[22m createTelegramBot src/telegram/bot.ts:[2m126:21[22m[39m
    [90m124| [39m  [35mconst[39m telegramCfg [33m=[39m account[33m.[39mconfig[33m;[39m
    [90m125| [39m
    [90m126| [39m  [35mconst[39m fetchImpl [33m=[39m [34mresolveTelegramFetch[39m(opts[33m.[39mproxyFetch[33m,[39m {
    [90m   | [39m                    [31m^[39m
    [90m127| [39m    network[33m:[39m telegramCfg[33m.[39mnetwork[33m,[39m
    [90m128| [39m  })[33m;[39m
[90m [2m‚ùØ[22m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts:[2m231:5[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[16/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22mtelegram media groups[2m > [22mbuffers messages with same media_group_id and processes them together
[31m[1mReferenceError[22m: Cannot access '__vite_ssr_import_24__' before initialization[39m
[36m [2m‚ùØ[22m createTelegramBot src/telegram/bot.ts:[2m126:21[22m[39m
    [90m124| [39m  [35mconst[39m telegramCfg [33m=[39m account[33m.[39mconfig[33m;[39m
    [90m125| [39m
    [90m126| [39m  [35mconst[39m fetchImpl [33m=[39m [34mresolveTelegramFetch[39m(opts[33m.[39mproxyFetch[33m,[39m {
    [90m   | [39m                    [31m^[39m
    [90m127| [39m    network[33m:[39m telegramCfg[33m.[39mnetwork[33m,[39m
    [90m128| [39m  })[33m;[39m
[90m [2m‚ùØ[22m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts:[2m298:7[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[17/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22mtelegram media groups[2m > [22mprocesses separate media groups independently
[31m[1mReferenceError[22m: Cannot access '__vite_ssr_import_24__' before initialization[39m
[36m [2m‚ùØ[22m createTelegramBot src/telegram/bot.ts:[2m126:21[22m[39m
    [90m124| [39m  [35mconst[39m telegramCfg [33m=[39m account[33m.[39mconfig[33m;[39m
    [90m125| [39m
    [90m126| [39m  [35mconst[39m fetchImpl [33m=[39m [34mresolveTelegramFetch[39m(opts[33m.[39mproxyFetch[33m,[39m {
    [90m   | [39m                    [31m^[39m
    [90m127| [39m    network[33m:[39m telegramCfg[33m.[39mnetwork[33m,[39m
    [90m128| [39m  })[33m;[39m
[90m [2m‚ùØ[22m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts:[2m373:7[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[18/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22mtelegram stickers[2m > [22mdownloads static sticker (WEBP) and includes sticker metadata
[31m[1mReferenceError[22m: Cannot access '__vite_ssr_import_24__' before initialization[39m
[36m [2m‚ùØ[22m createTelegramBot src/telegram/bot.ts:[2m126:21[22m[39m
    [90m124| [39m  [35mconst[39m telegramCfg [33m=[39m account[33m.[39mconfig[33m;[39m
    [90m125| [39m
    [90m126| [39m  [35mconst[39m fetchImpl [33m=[39m [34mresolveTelegramFetch[39m(opts[33m.[39mproxyFetch[33m,[39m {
    [90m   | [39m                    [31m^[39m
    [90m127| [39m    network[33m:[39m telegramCfg[33m.[39mnetwork[33m,[39m
    [90m128| [39m  })[33m;[39m
[90m [2m‚ùØ[22m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts:[2m440:7[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[19/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22mtelegram stickers[2m > [22mrefreshes cached sticker metadata on cache hit
[31m[1mReferenceError[22m: Cannot access '__vite_ssr_import_24__' before initialization[39m
[36m [2m‚ùØ[22m createTelegramBot src/telegram/bot.ts:[2m126:21[22m[39m
    [90m124| [39m  [35mconst[39m telegramCfg [33m=[39m account[33m.[39mconfig[33m;[39m
    [90m125| [39m
    [90m126| [39m  [35mconst[39m fetchImpl [33m=[39m [34mresolveTelegramFetch[39m(opts[33m.[39mproxyFetch[33m,[39m {
    [90m   | [39m                    [31m^[39m
    [90m127| [39m    network[33m:[39m telegramCfg[33m.[39mnetwork[33m,[39m
    [90m128| [39m  })[33m;[39m
[90m [2m‚ùØ[22m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts:[2m521:7[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[20/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22mtelegram stickers[2m > [22mskips animated stickers (TGS format)
[31m[1mReferenceError[22m: Cannot access '__vite_ssr_import_24__' before initialization[39m
[36m [2m‚ùØ[22m createTelegramBot src/telegram/bot.ts:[2m126:21[22m[39m
    [90m124| [39m  [35mconst[39m telegramCfg [33m=[39m account[33m.[39mconfig[33m;[39m
    [90m125| [39m
    [90m126| [39m  [35mconst[39m fetchImpl [33m=[39m [34mresolveTelegramFetch[39m(opts[33m.[39mproxyFetch[33m,[39m {
    [90m   | [39m                    [31m^[39m
    [90m127| [39m    network[33m:[39m telegramCfg[33m.[39mnetwork[33m,[39m
    [90m128| [39m  })[33m;[39m
[90m [2m‚ùØ[22m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts:[2m595:7[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[21/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22mtelegram stickers[2m > [22mskips video stickers (WEBM format)
[31m[1mReferenceError[22m: Cannot access '__vite_ssr_import_24__' before initialization[39m
[36m [2m‚ùØ[22m createTelegramBot src/telegram/bot.ts:[2m126:21[22m[39m
    [90m124| [39m  [35mconst[39m telegramCfg [33m=[39m account[33m.[39mconfig[33m;[39m
    [90m125| [39m
    [90m126| [39m  [35mconst[39m fetchImpl [33m=[39m [34mresolveTelegramFetch[39m(opts[33m.[39mproxyFetch[33m,[39m {
    [90m   | [39m                    [31m^[39m
    [90m127| [39m    network[33m:[39m telegramCfg[33m.[39mnetwork[33m,[39m
    [90m128| [39m  })[33m;[39m
[90m [2m‚ùØ[22m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts:[2m655:7[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[22/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22mtelegram text fragments[2m > [22mbuffers near-limit text and processes sequential parts as one message
[31m[1mReferenceError[22m: Cannot access '__vite_ssr_import_24__' before initialization[39m
[36m [2m‚ùØ[22m createTelegramBot src/telegram/bot.ts:[2m126:21[22m[39m
    [90m124| [39m  [35mconst[39m telegramCfg [33m=[39m account[33m.[39mconfig[33m;[39m
    [90m125| [39m
    [90m126| [39m  [35mconst[39m fetchImpl [33m=[39m [34mresolveTelegramFetch[39m(opts[33m.[39mproxyFetch[33m,[39m {
    [90m   | [39m                    [31m^[39m
    [90m127| [39m    network[33m:[39m telegramCfg[33m.[39mnetwork[33m,[39m
    [90m128| [39m  })[33m;[39m
[90m [2m‚ùØ[22m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts:[2m724:7[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[23/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/telegram/bot.media.includes-location-text-ctx-fields-pins.test.ts[2m > [22mtelegram inbound media[2m > [22mcaptures venue fields for named places
[31m[1mReferenceError[22m: Cannot access '__vite_ssr_import_24__' before initialization[39m
[36m [2m‚ùØ[22m createTelegramBot src/telegram/bot.ts:[2m126:21[22m[39m
    [90m124| [39m  [35mconst[39m telegramCfg [33m=[39m account[33m.[39mconfig[33m;[39m
    [90m125| [39m
    [90m126| [39m  [35mconst[39m fetchImpl [33m=[39m [34mresolveTelegramFetch[39m(opts[33m.[39mproxyFetch[33m,[39m {
    [90m   | [39m                    [31m^[39m
    [90m127| [39m    network[33m:[39m telegramCfg[33m.[39mnetwork[33m,[39m
    [90m128| [39m  })[33m;[39m
[90m [2m‚ùØ[22m src/telegram/bot.media.includes-location-text-ctx-fields-pins.test.ts:[2m152:7[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[24/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/bundled/session-memory/handler.test.ts[2m > [22msession-memory hook[2m > [22mcreates memory file with session content on /new command
[31m[1mAssertionError[22m: expected +0 to be 1 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 1[39m
[31m+ 0[39m

[36m [2m‚ùØ[22m src/hooks/bundled/session-memory/handler.test.ts:[2m98:26[22m[39m
    [90m 96| [39m    [35mconst[39m memoryDir [33m=[39m path[33m.[39m[34mjoin[39m(tempDir[33m,[39m [32m"memory"[39m)[33m;[39m
    [90m 97| [39m    [35mconst[39m files [33m=[39m [35mawait[39m fs[33m.[39m[34mreaddir[39m(memoryDir)[33m;[39m
    [90m 98| [39m    [34mexpect[39m(files[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                         [31m^[39m
    [90m 99| [39m
    [90m100| [39m    [90m// Read the memory file and verify content[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[25/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/bundled/session-memory/handler.test.ts[2m > [22msession-memory hook[2m > [22mfilters out non-message entries (tool calls, system)
[31m[1mTypeError[22m: The "path" argument must be of type string. Received undefined[39m
[36m [2m‚ùØ[22m src/hooks/bundled/session-memory/handler.test.ts:[2m143:50[22m[39m
    [90m141| [39m    [35mconst[39m memoryDir [33m=[39m path[33m.[39m[34mjoin[39m(tempDir[33m,[39m [32m"memory"[39m)[33m;[39m
    [90m142| [39m    [35mconst[39m files [33m=[39m [35mawait[39m fs[33m.[39m[34mreaddir[39m(memoryDir)[33m;[39m
    [90m143| [39m    const memoryContent = await fs.readFile(path.join(memoryDir, files‚Ä¶
    [90m   | [39m                                                 [31m^[39m
    [90m144| [39m
    [90m145| [39m    [90m// Only user/assistant messages should be present[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[26/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/bundled/session-memory/handler.test.ts[2m > [22msession-memory hook[2m > [22mfilters out command messages starting with /
[31m[1mTypeError[22m: The "path" argument must be of type string. Received undefined[39m
[36m [2m‚ùØ[22m src/hooks/bundled/session-memory/handler.test.ts:[2m188:50[22m[39m
    [90m186| [39m    [35mconst[39m memoryDir [33m=[39m path[33m.[39m[34mjoin[39m(tempDir[33m,[39m [32m"memory"[39m)[33m;[39m
    [90m187| [39m    [35mconst[39m files [33m=[39m [35mawait[39m fs[33m.[39m[34mreaddir[39m(memoryDir)[33m;[39m
    [90m188| [39m    const memoryContent = await fs.readFile(path.join(memoryDir, files‚Ä¶
    [90m   | [39m                                                 [31m^[39m
    [90m189| [39m
    [90m190| [39m    [90m// Command messages should be filtered out[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[27/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/bundled/session-memory/handler.test.ts[2m > [22msession-memory hook[2m > [22mrespects custom messages config (limits to N messages)
[31m[1mTypeError[22m: The "path" argument must be of type string. Received undefined[39m
[36m [2m‚ùØ[22m src/hooks/bundled/session-memory/handler.test.ts:[2m239:50[22m[39m
    [90m237| [39m    [35mconst[39m memoryDir [33m=[39m path[33m.[39m[34mjoin[39m(tempDir[33m,[39m [32m"memory"[39m)[33m;[39m
    [90m238| [39m    [35mconst[39m files [33m=[39m [35mawait[39m fs[33m.[39m[34mreaddir[39m(memoryDir)[33m;[39m
    [90m239| [39m    const memoryContent = await fs.readFile(path.join(memoryDir, files‚Ä¶
    [90m   | [39m                                                 [31m^[39m
    [90m240| [39m
    [90m241| [39m    [90m// Only last 3 messages should be present[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[28/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/bundled/session-memory/handler.test.ts[2m > [22msession-memory hook[2m > [22mfilters messages before slicing (fix for #2681)
[31m[1mTypeError[22m: The "path" argument must be of type string. Received undefined[39m
[36m [2m‚ùØ[22m src/hooks/bundled/session-memory/handler.test.ts:[2m300:50[22m[39m
    [90m298| [39m    [35mconst[39m memoryDir [33m=[39m path[33m.[39m[34mjoin[39m(tempDir[33m,[39m [32m"memory"[39m)[33m;[39m
    [90m299| [39m    [35mconst[39m files [33m=[39m [35mawait[39m fs[33m.[39m[34mreaddir[39m(memoryDir)[33m;[39m
    [90m300| [39m    const memoryContent = await fs.readFile(path.join(memoryDir, files‚Ä¶
    [90m   | [39m                                                 [31m^[39m
    [90m301| [39m
    [90m302| [39m    [90m// Should have exactly 3 user/assistant messages (the last 3)[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[29/294]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/hooks/bundled/session-memory/handler.test.ts[2m > [22msession-memory hook[2m > [22mhandles session files with fewer messages than requested
[31m[1mTypeError[22m: The "path" argument must be of type string. Received undefined[39m
[36m [2m‚ùØ[22m src/hooks/bundled/session-memory/handler.test.ts:[2m373:50[22m[39m
    [90m371| [39m    [35mconst[39m memoryDir [33m=[39m path[33m.[39m[34mjoin[39m(tempDir[33m,[39m [32m"memory"[39m)[33m;[39m
    [90m372| [39m    [35mconst[39m files [33m=[39m [35mawait[39m fs[33m.[39m[34mreaddir[39m(memoryDir)[33m;[39m
    [90m373| [39m    const memoryContent = await fs.readFile(path.join(memoryDir, files‚Ä¶
    [90m   | [39m                                                 [31m^[39m
    [90m374| [39m
    [90m375| [39m    [90m// Both messages should be included[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[30/294]‚éØ[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Unhandled Errors [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m
[31m[1m
Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Unhandled Error [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m
[31m[1mError[22m: [vitest-pool]: Worker forks emitted error.[39m
[90m [2m‚ùØ[22m EventEmitter.<anonymous> node_modules/vitest/dist/chunks/cli-api.B7PN_QUv.js:[2m8043:22[22m[39m
[90m [2m‚ùØ[22m EventEmitter.emit node:events:[2m508:20[22m[39m
[90m [2m‚ùØ[22m ChildProcess.emitUnexpectedExit node_modules/vitest/dist/chunks/cli-api.B7PN_QUv.js:[2m7610:22[22m[39m
[90m [2m‚ùØ[22m ChildProcess.emit node:events:[2m508:20[22m[39m
[90m [2m‚ùØ[22m Process.ChildProcess._handle.onexit node:internal/child_process:[2m293:12[22m[39m

[31m[1mCaused by: Error[22m: Worker exited unexpectedly[39m
[90m [2m‚ùØ[22m ChildProcess.emitUnexpectedExit node_modules/vitest/dist/chunks/cli-api.B7PN_QUv.js:[2m7609:33[22m[39m
[90m [2m‚ùØ[22m ChildProcess.emit node:events:[2m508:20[22m[39m
[90m [2m‚ùØ[22m Process.ChildProcess._handle.onexit node:internal/child_process:[2m293:12[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m


[2m Test Files [22m [1m[31m124 failed[39m[22m[2m | [22m[1m[32m680 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (806)[39m
[2m      Tests [22m [1m[31m196 failed[39m[22m[2m | [22m[1m[32m4184 passed[39m[22m[2m | [22m[33m11 skipped[39m[90m (4399)[39m
[2m     Errors [22m [1m[31m1 error[39m[22m
[2m   Start at [22m 10:56:48
[2m   Duration [22m 151.95s[2m (transform 47.90s, setup 642.23s, import 113.10s, tests 213.51s, environment 90ms)[22m

